import{a as zi}from"../../js/chunk-WSI4CI7G.mjs";function S(n,t){if(!{}.hasOwnProperty.call(n,t))throw new TypeError("attempted to use private field on non-instance");return n}var qi=0;function Nt(n){return"__private_"+qi+++"_"+n}var Pt="default",x=Nt("listeners"),U=Nt("context"),ft=Nt("addEventListeners"),E=class{constructor(t,e=!1){Object.defineProperty(this,ft,{value:Ni}),Object.defineProperty(this,x,{writable:!0,value:new Map}),Object.defineProperty(this,U,{writable:!0,value:null}),this.strict=!1,S(this,U)[U]=t||this,this.strict=e}on(t,e){return S(this,ft)[ft](t,e,!1),this}one(t,e){return S(this,ft)[ft](t,e,!0),this}off(t,e){return(Array.isArray(t)?t:t.split(" ")).forEach(o=>{let[s,...r]=o.includes(".")?o.split("."):[o,Pt],a=r.join(".")||Pt;(s?[S(this,x)[x].get(s)]:[...S(this,x)[x].values()]).filter(Boolean).forEach(c=>{Array.from(c.entries()).forEach(([u,p])=>{(!e||e===u)&&p.namespace===a&&c.delete(u)}),c.size===0&&S(this,x)[x].delete(s)})}),this}clear(){return S(this,x)[x].clear(),this}async trigger(t,...e){let[i,...o]=t.split("."),s=o.join("."),r=S(this,x)[x].get(i),a=S(this,x)[x].get("*"),l=[];return r&&r.forEach((c,u)=>{(!s||c.namespace.startsWith(s))&&(l.push(Promise.resolve(u.call(S(this,U)[U],...e))),c.once&&r.delete(u))}),a&&a.forEach((c,u)=>{l.push(Promise.resolve(u.call(S(this,U)[U],t,...e)))}),this.strict&&l.length===0&&console.warn(`No listeners for event: ${t}`),Promise.all(l)}async emit(t,...e){return this.trigger(t,...e)}};function Ni(n,t,e){(Array.isArray(n)?n:n.split(" ")).forEach(o=>{let[s,...r]=o.includes(".")?o.split("."):[o,Pt],a=r.join(".")||Pt;S(this,x)[x].has(s)||S(this,x)[x].set(s,new Map),S(this,x)[x].get(s).set(t,{once:e,namespace:a})})}var Vt=class extends E{constructor(){super(),this.init()}init(){let t=window.parent!==window;if(t){let e=()=>{this.message("LOCATION_CHANGE",{title:document.title,location:window.location.toString()})};window.addEventListener("hashchange",e),window.addEventListener("popstate",e),window.addEventListener("load",e),document.addEventListener("DOMContentLoaded",()=>{this.message("DOM_CONTENT_LOADED"),e()})}flexbe_cli.is_admin||window.addEventListener("keydown",e=>{let i="app.flexbe.com",o=e.metaKey||e.ctrlKey,s=e.shiftKey;(["F2"].includes(e.key)||["/","\\"].includes(e.key)&&o&&s)&&(t?this.message("CLOSE_FRAME"):window.location.href=`https://${i}/project/${flexbe_cli.group_id}/editor/${flexbe_cli.p_id}/`)})}message(t,e={}){window.parent!==window&&window.parent.postMessage({message:t,payload:e},"*"),this.trigger(t,e)}},b=new Vt;var fo=String.fromCharCode;function Fe(n,t="default"){let[e,i]=n.split("#"),[o,s]=e.split("?"),r=o.endsWith("/"),a=o;return/\.[0-9a-z]+$/i.test(o)||o.startsWith("/files/")||o.startsWith("/img/")||!o.startsWith("./")&&!o.startsWith("/")?n:(t==="enabled"&&!r&&a&&(a=`${a}/`),t==="disabled"&&r&&o!=="/"&&(a=a.replace(/\/$/,"")),`${a}${s?`?${s}`:""}${i?`#${i}`:""}`)}var Vi=150,Re=2160,De={avif:null,webp:null};function Bi(){var n;let t=typeof flexbe_cli=="object"&&((n=flexbe_cli.vars)==null?void 0:n.site.images)||{};return{lazy:!0,lazy_priority:!1,avif:!1,webp:!1,avif_support:De.avif||t.avif_support,webp_support:De.webp||t.webp_support,slow_network:!1,maxSize:Re,minSize:Vi,quality_map:{jpg:70,webp:70,avif:55}}}async function Bt(n){try{let t=new Image;return"decode"in t?(t.src=n,await t.decode(),!0):await new Promise(e=>{let i=t;i.onload=()=>e(!0),i.onerror=()=>e(!1),i.src=n})}catch{return!1}}function jt(n){if(typeof n!="string")return n;n=n.replace(/(\/img\/[\d_q]+)\/[\w-]+(\.\w{3,4})/i,"$1$2");let[,t,e,i,o]=n.match(/\/img\/(\d+)_?(\d+)?_?q?(\d+)?\.(\w{3,4})/i)||[],s=+t,r=`${t}.${o}`,a=e?+e:0,l=i?+i:null;return{id:s,ext:o,name:r,size:a,quality:l}}function ji(n,t){let e=t.avif_support,i=t.webp_support,o=t.avif,s=t.webp,r=n.ext;return e&&o?r="avif":i&&s?r="webp":n.ext==="webp"&&(i?r="webp":r=n.transparent?"png":"jpg"),r}function Wi(n,t=null,e=null){var i;e={...Bi(),...e};let{id:o,ext:s}=n;if(!o)return"";let r=e.maxSize||Re;!t&&n.ext==="webp"&&!e.webp_support&&(t=Math.min(n.width||r,r));let a=(i=n.animated)!=null?i:s==="gif",l=`/img/${o}.${s}`;if(!t||a||s==="svg")return l;let u=ji(n,e),p=e.slow_network&&Ui(),f=e.quality_map;switch(p&&(f={jpg:50,webp:50,avif:45}),u){case"png":return`/img/${o}_${t}.png`;case"avif":case"webp":case"jpg":return`/img/${o}_${t}_q${f[u]}.${u}`;case"gif":default:return l}}function Hi(n){let t=String(n).match(/\.(jpg|jpeg|png|gif|svg|bmp|webp)$/i);return t&&t[1]?t[1]:""}function Gi(n){return n!=="transparent"?n:"#000000"}function Wt(n){if(typeof n=="string"&&(n=jt(n)),!n||typeof n!="object")return{};let t=n.img_ext||n.ext,e=n.img_id||n.id,i=n.img_name||n.name;(!t||t==="false")&&(t=i?Hi(i):"jpg");let o=n.img_border||n.border,s=Gi(n.img_average||n.average),r=n.img_preview||n.preview||"",a=n.img_width||n.width||0,l=n.img_height||n.height||0,u=+(+n.img_proportion||+n.proportion||0).toFixed(2),p=n.img_animated||n.animated||t==="gif",f=n.img_transparent||n.transparent||0;return{id:e,ext:t,average:s,preview:r,width:a,height:l,proportion:u,border:o,animated:p,transparent:f}}function ze(n,t=0,e){let i=Wt(n),o=typeof t=="number"?Math.round(t):typeof t=="string"?parseInt(t,10):null;return Wi(i,o,e)}function Ui(){var n;return typeof navigator>"u"?!1:(((n=navigator.connection)==null?void 0:n.effectiveType)||"4g")!=="4g"}function pt(n,t){if(!{}.hasOwnProperty.call(n,t))throw new TypeError("attempted to use private field on non-instance");return n}var Qi=0;function Zt(n){return"__private_"+Qi+++"_"+n}var Ht=Zt("checkSupports"),ht=Zt("deviceInfo"),mt=Zt("applyClasses"),Gt=class{constructor(){Object.defineProperty(this,mt,{value:tn}),Object.defineProperty(this,ht,{value:Ji}),Object.defineProperty(this,Ht,{value:Zi}),this.is_screen_mobile=void 0,this.is_screen_mobile_scaled=void 0,this.is_screen_desktop=void 0,this.is_screen_desktop_scaled=void 0,this.is_touch=void 0,this.is_pointer=void 0,this.is_tablet=void 0,this.is_mobile=void 0,this.is_desktop=void 0,this.is_chrome=void 0,this.is_safari=void 0,this.is_firefox=void 0,this.is_OSX=void 0,this.is_android=void 0,this.is_ios=void 0,this.is_preview=void 0,this.is_bot=void 0,this.is_instagram=void 0,this.device_type=void 0}init(){pt(this,ht)[ht](),pt(this,mt)[mt](),pt(this,Ht)[Ht](),$(window).on("resize.deviceInfo",()=>{pt(this,ht)[ht]()}),$(window).on("resized.deviceInfo",()=>{pt(this,mt)[mt]()}),flexbe_cli.events.on("hideShowUI",t=>{this.is_preview=["preview","generation"].includes(t),$(document.body).removeClass("mode--editor mode--preview mode--generation").addClass(`mode--${t}`)})}matchScreen(t,e){let i=["screen"];return t!=null&&i.push(`(min-width: ${t}px)`),e!=null&&i.push(`(max-width: ${e}px)`),window.matchMedia(i.join(" and ")).matches}};async function Zi(){let n=flexbe_cli.vars.site.images||{},[t,e]=await Promise.all([n.webp_support||Bt("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"),n.avif_support||Bt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")]);n.webp_support=t,n.avif_support=e}function Ji(){var n,t;let e=(n=window.CSS)==null?void 0:n.supports("zoom","1"),i=navigator.userAgent.toLowerCase();this.is_screen_mobile=this.matchScreen(0,767),this.is_screen_mobile_scaled=e&&this.matchScreen(0,399),this.is_screen_desktop=this.matchScreen(768,1e4),this.is_screen_desktop_scaled=e&&this.matchScreen(768,1199),this.is_touch="ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(any-pointer: coarse)").matches,this.is_pointer=!this.is_touch||window.matchMedia("(pointer: fine)").matches,this.is_tablet=/ipad|xoom|kindle|playbook|tablet/i.test(i),this.is_mobile=!this.is_tablet&&i.indexOf("mobile")!==-1,this.is_desktop=!this.is_mobile&&!this.is_tablet,this.is_chrome=/(chromium|chrome)\/(\d+)/.test(i),this.is_safari=i.indexOf("safari")!==-1&&((t=i.match(/version\/(\d+)/))==null?void 0:t[1]),this.is_firefox=i.indexOf("firefox")!==-1,this.is_OSX=/ipad|iphone|ipod|macintosh/gi.test(i),this.is_android=i.indexOf("android")!==-1,this.is_ios=this.is_OSX&&this.is_touch&&!this.is_desktop,this.is_preview=/is-view|mode--preview|mode--generation/.test(document.body.className),this.is_instagram=/instagram/i.test(i),this.is_mobile&&this.is_touch?this.device_type="mobile":this.is_tablet&&this.is_touch?this.device_type="tablet":this.device_type="desktop"}function tn(){let n=$(document.body);n.toggleClass("is-mobile",this.is_mobile),n.toggleClass("is-tablet",this.is_tablet),n.toggleClass("is-desktop",this.is_desktop),n.toggleClass("is-pointer",this.is_pointer),n.toggleClass("is-touch",this.is_touch),n.toggleClass("is-ios",!!this.is_ios),n.toggleClass("is-android",this.is_android),n.toggleClass("is-osx",this.is_OSX&&this.is_desktop),n.toggleClass("is-safari",!!this.is_safari),this.is_safari&&n.addClass(`is-safari-${this.is_safari}`),n.toggleClass("is-firefox",this.is_firefox),n.toggleClass("is-chrome",this.is_chrome),n.toggleClass("is-instagram",this.is_instagram)}var K=new Gt;function O(n,t){if(!{}.hasOwnProperty.call(n,t))throw new TypeError("attempted to use private field on non-instance");return n}var sn=0;function Ne(n){return"__private_"+sn+++"_"+n}var qe,C=Ne("smallViewportHeight"),T=Ne("largeViewportHeight"),Jt=class{constructor(){this.containerWidth=null,this.oldWidth=null,this.oldHeight=null,this.lockedMode=!1,this.responsiveMode=null,this.clientWidth=null,this.clientHeight=null,Object.defineProperty(this,C,{writable:!0,value:null}),Object.defineProperty(this,T,{writable:!0,value:null}),this.lockedViewport=!1,this.viewportWidth=null,this.viewportHeight=null,this.proportion=null}init(){this.simulateWindowResized(),this.simulateDocumentResize(),this.updateSizes({triggerResize:!1}),this.watchContainerSize(),this.applySizeVariablesOnResize()}trigger(t,e=window){e.dispatchEvent(new CustomEvent(t))}getAccurateViewportInfo(){let e=document.documentElement.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=Math.round(e.width),r=o,a=i-s;return{clientWidth:s,clientHeight:r,viewportWidth:i,viewportHeight:o,scrollbarWidth:a}}updateSizes({width:t,height:e,proportion:i=null,triggerResize:o=!0,lockViewport:s}){var r,a;let{clientWidth:l,clientHeight:c,scrollbarWidth:u}=this.getAccurateViewportInfo();t=t??(this.lockedViewport?this.viewportWidth:l),e=e??(this.lockedViewport?this.viewportHeight:c),t=Math.min(t,l),e=Math.min(e,c);let p=t>=0&&t<=399,f=t>=768&&t<=1199;(f||p)&&(t=f?1200:400),this.oldWidth=this.clientWidth,this.oldHeight=this.clientHeight,this.viewportWidth=t,this.viewportHeight=e,this.clientWidth=l,this.clientHeight=c,O(this,C)[C]=Math.min(this.clientHeight,(r=O(this,C)[C])!=null?r:this.clientHeight),O(this,T)[T]=Math.max(this.clientHeight,(a=O(this,T)[T])!=null?a:this.clientHeight),(flexbe_cli.is_admin||O(this,T)[T]-O(this,C)[C]>120)&&(O(this,C)[C]=this.clientHeight,O(this,T)[T]=this.clientHeight),this.scrollbarWidth||(this.scrollbarWidth=u),i!=null&&(this.proportion=i),s!=null&&(this.lockedViewport=s),this.lockedMode||(this.responsiveMode=flexbe_cli.vars.page.responsive&&t<=767?"mobile":"desktop"),o&&(this.trigger("resize"),this.trigger("resized"))}lockMode(t){this.lockedMode=t}applySizeVariablesOnResize(){let t=$(document.documentElement),e=$(document.body),i=()=>{t.css("--scrollbarWidth",`${this.scrollbarWidth}px`),t.css("--100vw",`${this.viewportWidth}px`),t.css("--100vh",`${this.viewportHeight}px`),CSS.supports("height","1svh")||t.css("--100svh",`${O(this,C)[C]}px`),CSS.supports("height","1lvh")||t.css("--100lvh",`${O(this,T)[T]}px`),this.proportion?t.css("--cover",`${Math.round(this.viewportWidth/this.proportion)}px`):t.css("--cover",""),e.toggleClass("adaptive-mobile",this.responsiveMode==="mobile"),e.toggleClass("adaptive-desktop",this.responsiveMode==="desktop")};i(),K.is_ios&&setTimeout(()=>i(),150),$(window).on("resized.setVars",()=>i())}watchContainerSize(){let t=()=>{let e=document.createElement("div");e.classList.add("container"),requestAnimationFrame(()=>{document.body.appendChild(e),this.containerWidth=e.offsetWidth,document.body.removeChild(e)})};t(),$(window).on("resized.setContainer",()=>t())}simulateWindowResized(){let e,i=this.oldWidth,o=this.oldHeight;$(window).on("resize orientationchange",s=>{s.originalEvent&&(this.updateSizes({triggerResize:!1}),clearTimeout(e),e=setTimeout(()=>{this.oldWidth=i,this.oldHeight=o,i=this.clientWidth,o=this.clientHeight,requestAnimationFrame(()=>{this.trigger("resized")})},80))})}simulateDocumentResize(){requestAnimationFrame(()=>{this.documentHeight=document.body.offsetHeight});let t=flexbe_cli.is_admin?200:80,e=(i=0)=>{let o=document.body.offsetHeight;Math.abs(o-this.documentHeight)>=5&&(this.documentHeight=o,this.trigger("documentresize",document),clearTimeout(qe),qe=setTimeout(()=>{this.trigger("documentresized",document)},i))};if(typeof ResizeObserver=="function"){let i=!0;new ResizeObserver(()=>{if(i){i=!1;return}e(t)}).observe(document.querySelector("body"))}else setInterval(()=>{e(0)},t)}},P=new Jt;var Ot={};function rn(n,t){let e=document.createElement("link");return new Promise((i,o)=>{let s=!1,r,a=(l=!0)=>{s||(s=!0,clearTimeout(r),l==="timeout"?o(new Error("timeout")):i(l))};e.onerror=a.bind(null,!1),e.onload=a.bind(null,!0),r=setTimeout(a.bind(null,"timeout"),t),e.rel="stylesheet",e.href=n,document.body.appendChild(e)})}function an(n,t){let e=document.createElement("script");return new Promise((i,o)=>{let s=!1,r,a=(l=!0)=>{s||(s=!0,clearTimeout(r),l==="timeout"?o(new Error("timeout")):i(l))};e.onload=a.bind(null,!0),e.onerror=a.bind(null,!1),r=setTimeout(a.bind(null,"timeout"),t),e.async=!0,e.src=n,document.body.appendChild(e)})}function Ve(n,t=15e3){return!n||n.length===0?Promise.resolve(!1):Array.isArray(n)?Promise.all(n.map(e=>Ve(e,t))).then(e=>e.every(Boolean)):(Ot[n]||(Ot[n]=/\.css(\?.*)?$/.test(n)?rn(n,t):an(n,t)),Ot[n])}function R(n,t,e=15e3){let i=Ve(n,e);return typeof t=="function"&&i.then(()=>t(!0)).catch(()=>t(!1)),i}var et={anchorToCenter:!0,inScroll:!1,skip:!1,_latest:null,get latest(){let n=P.zoom||1;return this._latest/n},init(){window.history.scrollRestoration&&(window.history.scrollRestoration="auto"),requestAnimationFrame(()=>{this._latest=window.scrollY}),document.addEventListener("wheel",()=>{this.$inScrollElement&&(this.$inScrollElement.stop(),this.$inScrollElement=null)},{passive:!0}),document.addEventListener("scroll",()=>{this.inScroll=!0,this._latest=window.scrollY},{passive:!0}),document.addEventListener("scrollend",()=>{this.inScroll=!1},{passive:!0}),this.scrollImprovement.init(),flexbe_cli.vars.site.smoothingScroll&&this.scrollSmoothing.init()},scrollImprovement:{scrollTimer:0,init(){this.createStopScrollEvent()},createStopScrollEvent(){let n=et.latest;document.addEventListener("scroll",()=>{let t=n>et.latest?"up":"down",e=Math.max(et.latest-n,n-et.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{n=et.latest,document.dispatchEvent(new CustomEvent("scrollend",{detail:{direction:t,distance:e}}))},200)},{passive:!0})}},scrollSmoothing:{duration:1.2,lenisInstance:null,instances:[],loadLib(){return new Promise(n=>R(["/_s/lib/lenis/lenis.min.js"],()=>n(!0)))},async init(){if(flexbe_cli.is_admin)return;let n=".scroller",t=".widget-content, .elements-list",e=".container-list",i=document.querySelectorAll(n);await this.loadLib(),this.instances.push(new window.Lenis({duration:this.duration,eventsTarget:document.querySelector(e)||document.documentElement})),i.length&&i.forEach(s=>{let r=new window.Lenis({duration:this.duration,wrapper:s,eventsTarget:s.querySelector(t)||s});this.instances.push(r)});let o=s=>{this.instances.forEach(r=>{r.raf(s)}),requestAnimationFrame(o)};requestAnimationFrame(o),$(document).on("bringIntoView.scroll-smoothing",()=>{this.instances.forEach(s=>{s.stop(),s.start()})})},destroy(){$(document).off(".scroll-smoothing"),this.instances.forEach(n=>{n.destroy()}),this.instances=[]}},scrollLock:{loaded:!1,locked:!1,async load(){if(!this.loaded)return R(["/_s/lib/scroll-lock/scroll-lock.min.js"],()=>{this.loaded=!0,window.scrollLock._state.lockableSelectors=["html"],window.scrollLock._state.fillGapSelectors=["html"],window.scrollLock._state.scrollableSelectors=[".scroller",".scrollable","[data-scroll-lock-scrollable]"]})},async lock(){this.locked=!0,await this.load(),typeof window.scrollLock<"u"&&(window.scrollLock.disablePageScroll(),P.trigger("resized"))},unlock(){this.locked=!1,typeof window.scrollLock<"u"&&(window.scrollLock.clearQueueScrollLocks(),window.scrollLock.enablePageScroll(),P.trigger("resized"))}},to(n){document.scrollingElement.scrollTo(0,n)},toElement(n,t={}){let e=$(n);if(n=e[0],!n)return!1;t.animation==null&&(t.animation=!0),t.centered==null&&(t.centered=this.anchorToCenter),t.force==null&&(t.force=!0);let i=0,o=0,s,r=flexbe_cli.helpers.scrollParent(n,"y");(!r||$(r).is(".b_block, .container-list"))&&(r=document.scrollingElement);let a=t.padding||0,l=r===document.body||r===document.documentElement,c=l?flexbe_cli.resize.clientHeight:r.offsetHeight,u=e.offset().top,p=n.offsetHeight,f=l?$("html, body"):$(r);K.is_mobile?s=f.find(".menu-fixed > .nav-header"):flexbe_cli.theme_id===4?o=flexbe_cli.fixed.getAllFixedHeight(u):s=f.find('.floating[data-floating="true"]'),s&&s.length&&(o+=s[0].offsetHeight-2);let m=Math.max(0,c-o-p);if(p>=c&&(t.centered=!1),t.centered?i=u-Math.max(0,m/2)-o:i=u-a-o,t.offset&&(i+=t.offset),!t.force){let d=r.offsetTop,h=e[0].getBoundingClientRect(),g=Math.max(h.top,d);if(Math.min(h.bottom,d+c)-g>=p/2)return typeof t.complete=="function"&&t.complete(),!1}this.$inScrollElement=f,$(document).off("documentresize.scrollTo").on("documentresize.scrollTo",()=>{this.toElement(n,t)}),f.stop(),f.animate({scrollTop:i},{delay:t.delay||0,duration:t.duration?t.duration:t.animation?450:0,easing:t.animation?"swing":"linear",always:(...d)=>{this.$inScrollElement=!1,$(document).off("documentresize.scrollTo"),typeof t.complete=="function"&&t.complete(...d)}})}},z=et;function te(n){let t=$(n).eq(0);if(t.length){let e=new Event("bringIntoView",{bubbles:!0,cancelable:!0});t[0].dispatchEvent(e)}}function Be(n,t=!1){if(n=n?Fe(n,flexbe_cli.vars.site.trailingSlash):null,flexbe_cli.is_admin){n?b.message("LEAVE_PAGE",{href:n,blank:t}):b.message("WRONG_LINK",{type:"link",href:n});return}if(!n){console.warn("Empty link");return}window.parent!==window&&n.includes("http")&&(t=!0),t?window.open(n,"_blank").focus():window.location.href=n}function Mt(n="",t){if(typeof n!="string")return!1;if(/#{1,2}.+/.test(n)){flexbe_cli.theme_id===4&&$('nav[data-opened="true"]').length&&b.trigger("ui_mobilemenu_close",{}),flexbe_cli.theme_id!==4&&$(".mobile-menu.show").length&&$(".mobile-menu").removeClass("show").trigger("close"),n=n.replace(/^\.\/#{2}/,"#").trim();let e=n.trim().split("#"),i=e[e.length-1];if(!(e[0]===""||e[0]==="./"||e[0]===new URL(document.baseURI).pathname))return Be(n),!0;let s=$(`._anchor[name="${i}" i], [id="${i}"]`),r=s.length?s.closest("[data-id]"):$(`[data-id="${i}" i]`);r.is(".element-item--free")&&(r=r.find(".element-content"));let a=r.closest(".b_block").filter(":visible"),l=r.closest(".m_modal");if((s.length||r.length)&&te(s.length?s:r),i==="cart")b.trigger("ui_modal_close",{}),b.trigger("ui_cart_open",{});else if(a.length)b.trigger("ui_cart_close",{}),b.trigger("ui_modal_close",{}),setTimeout(()=>{let c=a;if(r&&!a.is(r)){let u=a[0].getBoundingClientRect(),p=r[0].getBoundingClientRect(),f=p.top-u.top>P.viewportHeight-100,m=p.top<u.top||p.bottom>u.bottom;(f||m)&&(c=r)}c.is(":visible")&&z.toElement(c,{force:!i.startsWith("tab")})},30),window.history.replaceState(null,null,`#${i}`);else if(l.length){let c=l.data("id");b.trigger("ui_cart_close",{}),b.trigger("ui_modal_open",{id:c})}else window.location.hash=`#${i}`,flexbe_cli.is_admin&&b.message("WRONG_LINK",{type:"anchor",href:`#${i}`})}else return Be(n,t),!0}function je(n=document){$(n).find("[data-product]").each((e,i)=>{let o=$(i),s=o.data("product");o.removeAttr("data-product"),(s==null||typeof s=="object"&&!Object.keys(s).length)&&(s=null),s!==null?o.data("product",s):o.removeData("product")})}function ee(){if(flexbe_cli.lockPopstate)return;let n=window.location.hash;if(!n&&window.parent)try{n=window.parent.location.hash}catch{}flexbe_cli.lockPopstate=!0,/^#/.test(n)?Mt(n):flexbe_cli.modal.opened.size&&b.trigger("ui_modal_close"),flexbe_cli.lockPopstate=!1}function ie(n=()=>{},t=()=>{}){let e=!1;["complete","loaded"].includes(document.readyState)?i():document.addEventListener("DOMContentLoaded",()=>i());function i(){if(!e){if(typeof $>"u"||!$.debounce){setTimeout(i,10);return}e=!0,n(),requestAnimationFrame(async()=>{$("body").removeClass("noanimate").addClass("DOMContentLoaded"),await t(),flexbe_cli.vars.globals.isService||(ee(),setTimeout(()=>ee(),1e3),window.addEventListener("popstate",ee)),flexbe_cli.isInited=!0})}}}var ne={};zi(ne,{get:()=>ln,set:()=>cn});function ln(n){let t=document.cookie.match(new RegExp(`(?:^|; )${n.replace(/([$()*+./?[\\\]^{|}])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}function cn(n,t,e={}){let i=e.expires;if(typeof i=="number"){let r=new Date;r.setTime(r.getTime()+i*1e3),i=r,e.expires=r}else i instanceof Date&&(e.expires=i.toUTCString());t=encodeURIComponent(t);let o=`${n}=${t}`;Object.keys(e).forEach(r=>{o+=`; ${r}`;let a=e[r];a!==!0&&(o+=`=${a}`)}),document.cookie=o}function Lt(n){if(!n||!n.offsetParent)return null;let t=0,e=0;for(;n;){if($.css(n,"position")==="fixed"){t+=window.scrollY,e+=window.scrollX;break}t+=n.offsetTop-n.scrollTop,e+=n.offsetLeft-n.scrollLeft,n=n.offsetParent}return{top:Math.round(t),left:Math.round(e)}}function We(n,t=[]){return n.parentNode==null?t:We(n.parentNode,[...t,n])}function un(n){let t=/(auto|scroll)/,e=getComputedStyle(n,null);return["overflow","overflow-y","overflow-x"].some(i=>t.test(e.getPropertyValue(i)))}function He(n){if(!n||!n.parentNode)return;let t=n.ownerDocument||document,e=We(n.parentNode,[]);for(let i=0;i<e.length;i++)if(un(e[i]))return e[i];return t.scrollingElement||t.documentElement}function W(n="",t={}){return new Promise((e,i)=>{$.ajax({url:n,type:t.type||t.method||"POST",dataType:"json",...t}).done(o=>{e(o)}).fail(o=>{let s=o.responseJSON,r=s?new Error(s.message):o;r.status=o.status,r.data=s,i(r)})})}function oe(n,t={}){t={onSuccess:()=>{},onComplete:()=>{},onError:()=>{},onProgress:()=>{},...t};let e=new FormData;e.append("file",n);let i=$.ajax({url:"/mod/file/lead/upload/",type:t.type||t.method||"POST",dataType:"json",processData:!1,contentType:!1,data:e,success:(o,s)=>{t.onSuccess(o,s)},error:(o,s)=>{t.onError(o,s)},complete:(o,s)=>{t.onComplete(o,s)},xhr:()=>{let o=new window.XMLHttpRequest;return o.upload.addEventListener("progress",s=>t.onProgress(i,s)),o},...t});return i}function Ge(n){return String(n).split("").reduce((e,i)=>(e=(e<<5)-e+i.charCodeAt(0),e&e),0).toString(16)}var Ue={fetch:W,upload:oe,scrollParent:He,getElOffset:Lt,gotoLink:Mt,bringIntoView:te,getImageUrl:ze,hashCode:Ge,cookie:ne};var dn=[".layout-type-header",".layout-type-tabs",".layout-type-column",".layout-type-products",".flexbe-cards-container.mode-slider",".content-zone--vertical.bg-element",".content-zone--vertical:not(.bg-element) .element-item--static",".flexbe-card:not(.swiper-slide)",".quiz-progress",".step-title",".quiz-fields"].join(","),fn=[".free-area .element-item"].join(","),Ft={startTransitions(n){let t=$(n);if(flexbe_cli.is_admin){t.addClass("was-view"),t.removeClass("wait-animation");return}let e=t.find(fn),i=t.find(dn);i=i.filter((a,l)=>$(l).find(i).length===0);let o=200,s=Math.min(80,1e3/i.length),r=1e3+i.length*s;i.css("--transitionDelay",a=>`${a*s}ms`),i.addClass("transition-target"),e.addClass("transition-target"),setTimeout(()=>{t.addClass("was-view")},o),setTimeout(()=>{this.stopTransition(t,i)},o+r)},stopTransition(n,t){let e=$(n),i=$(t);i.length||(i=e.find(t),i=i.filter((o,s)=>$(s).find(i).length===0)),e.removeClass("wait-animation"),i.removeClass("transition-target"),i.css("--transitionDelay",""),e.trigger("flexbe-transition-end")}};function q(n,t){if(!{}.hasOwnProperty.call(n,t))throw new TypeError("attempted to use private field on non-instance");return n}var pn=0;function gt(n){return"__private_"+pn+++"_"+n}var X=gt("lskey"),Y=gt("query"),se=gt("session"),re=gt("saveSession"),ae=gt("saveReferrer"),le=class{constructor(){Object.defineProperty(this,ae,{value:_n}),Object.defineProperty(this,re,{value:gn}),Object.defineProperty(this,se,{get:mn,set:void 0}),Object.defineProperty(this,Y,{get:hn,set:void 0}),Object.defineProperty(this,X,{writable:!0,value:"client_utm"}),Object.keys(q(this,Y)[Y]).length&&q(this,re)[re](),this.referrer||q(this,ae)[ae]()}get referrer(){try{return sessionStorage.getItem("referrer")}catch(t){return console.error(t),null}}get data(){return{...q(this,se)[se],...q(this,Y)[Y]}}getUtm(){return this.data}toString(){return new URLSearchParams(this.data).toString()}};function hn(){let n=[...new URL(window.location.toString()).searchParams].filter(([t])=>/utm_/.test(t));return{...Object.fromEntries(n)}}function mn(){try{return JSON.parse(localStorage.getItem(q(this,X)[X])||"null")}catch(n){return console.error(n),null}}function gn(){if(!flexbe_cli.is_admin)try{let n=q(this,Y)[Y];Object.keys(n).length?localStorage.setItem(q(this,X)[X],JSON.stringify(n)):localStorage.removeItem(q(this,X)[X])}catch{}}function _n(){try{sessionStorage.setItem("referrer",document.referrer)}catch(n){console.error(n)}}var it=new le;var bn={quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_done:"done_open",modal_product:"product_show",order_done:"order_done",pay_done:"pay_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close",app_link:"app_link_open"},H={get u_id(){return localStorage.getItem("f_uid")||0},set u_id(n){try{localStorage.setItem("f_uid",String(n))}catch{}},init(){if(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.vars.globals.isBot||!flexbe_cli.p_id)return;let n=flexbe_cli.vars.site.delayCounters||0;setTimeout(()=>{let t=flexbe_cli.helpers.cookie.get("f_uid")||this.u_id;t?(this.u_id=t,yn()):vn()},n),this.AB.init(),this.ecommerce.init(),this.QUIZ.init()},getGoal(n,t){if(n==="modal"){let{modal:e}=flexbe_cli.modal.find(t)||{modal:null};/form/.test(t)?n="modal_form":/done/.test(t)?n="modal_done":/product/.test(t)?n="modal_product":(/quiz/.test(t)||e&&e.getAttribute("data-m-id")==="QUIZ")&&(n="quiz")}return bn[n]||!1},reachGoal(n,t={}){if(flexbe_cli.is_admin||!n)return;let e={goalAction:"send",goalValue:""};t.goalParams&&(e.goalParams=t.goalParams),t.leadId&&(e.leadId=t.leadId),b.trigger("reach_goal",{name:n,params:e})},reachGoals(n={},t={}){if(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.vars.globals.isBot||!flexbe_cli.p_id)return;let e=`${n.goal||""}`.trim(),i=`${n.mainGoal||""}`.trim(),o=`${n.htmlGoal||""}`.trim();if(i&&this.reachGoal(i,t),e)try{this.reachGoal(e,t)}catch(s){console.warn("reachGoals [goal]: ",s.message)}if(o)try{let s=o.replace(/{{\s*goalAction\s*}}/g,t.goalAction||"").replace(/{{\s*goalValue\s*}}/g,t.goalValue||"").replace(/(["']?){{\s*goalParams\s*}}\1/g,JSON.stringify(t.goalParams||{})),r=$("<div></div>").append(s).find("script");r.length&&(s=r.html()),(async l=>{let c=Object.getPrototypeOf(async()=>{}).constructor;await new c("{ goalAction, goalValue, goalParams, formData }",`{
 ${s} 
}`)(l)})(t).catch(l=>{console.error("Error executing action code:",l)})}catch(s){console.warn("reachGoals [htmlGoal]: ",s.message)}},ecommerce:{inited:!1,init(){this.inited=!0,window.dataLayer||(window.dataLayer=[])},add(n){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,add:{products:[this._normalizeItem(n)]}}})},remove(n){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,remove:{products:[this._normalizeItem(n)]}}})},purchase(n,t){if(!(!n&&n.length===0)){this.inited||this.init(),t||(t=Math.ceil(Math.random()*1e4));try{window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,purchase:{actionField:{id:t},products:n.map(e=>this._normalizeItem(e))}}})}catch{}}},_normalizeItem(n){var t,e,i;return{id:n.id,name:n.name||n.title,price:(t=n.price)!=null?t:n.orderPrice,brand:(e=n.brand)!=null?e:n.vendorCode,variant:n.optionsInfo?n.optionsInfo.map(o=>o.name).join(", "):"",quantity:(i=n.count)!=null?i:n.quantity}}},AB:{process:{},init(){flexbe_cli.is_admin||!document.querySelectorAll("[data-abtest-variant]").length||flexbe_cli.block.$blocks.on("screen",n=>{let t=n.currentTarget._core,e=n.detail||{};!e.state||!e.first||!(t!=null&&t.abtestVariant)||this.fixView(t.abtestId,t.abtestVariant)})},setCookie(n){flexbe_cli.helpers.cookie.set("f_ab",JSON.stringify(n),{expires:7*24*60*60,path:"/",domain:document.location.hostname})},getCookie(){let n=flexbe_cli.helpers.cookie.get("f_ab");if(n)try{n=JSON.parse(decodeURIComponent(n))}catch(t){console.warn("Can`t parse abtest cookie",t)}return n||(n={view:{},lead:[]}),n},async fixView(n,t){if(n==null||t==null||t!=="a"&&t!=="b")return;if(this.getCookie().view[n]==null&&!this.process[n]){this.process[n]=!0;try{await W("/mod/stat/abtest/",{data:{testId:n,variant:t,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}});let i=this.getCookie();i.view[n]=t,this.setCookie(i)}catch(i){console.error("Can't fix abtest",i)}this.process[n]=!1}}},QUIZ:{inited:!1,init(){this.inited||(this.inited=!0,b.on("quiz_event.stat",(n={})=>{let t=n.payload||{};if(!["step","submit"].includes(n.event)||n.event==="step"&&!t.toNext)return;let e=n.quiz,i=e.$area.attr("data-page-id"),o=n.answerGoals,s=n.resultGoals,r=n.resultGoalsData,l=e.core.id,c=t.fromAnswers||[],u=t.toId,p=t.sessionId,f=t.fromId,m=c.reduce((d,h)=>d.concat((h.variants||[]).map(g=>g.id)),[]);if(this.fixAnswer({sessionId:p,sectionId:l,answerStep:f,answerVariants:m,viewStep:u,pId:i}),o){let d="answer";c.forEach(h=>{var g;if((g=h.variants)!=null&&g.length)h.variants.forEach(_=>{let y=_.value;H.reachGoals(o,{goalAction:d,goalValue:y})});else{let _=h.value||"";["email","phone","name"].includes(h.type)&&(_=""),H.reachGoals(o,{goalAction:d,goalValue:_})}})}s&&H.reachGoals(s,r)}))},fixAnswer({sectionId:n,sessionId:t,answerStep:e,viewStep:i,answerVariants:o,pId:s}){let r;if(i&&e?r="/mod/quiz/stat/save/composite/":e?r="/mod/quiz/stat/save/answer/":i&&(r="/mod/quiz/stat/save/view/"),!r)return;H.u_id?a():b.one("user_created",()=>{a()});async function a(){return W(r,{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,f_uid:H.u_id,page_id:s||flexbe_cli.p_id,session_id:t,section_id:n,answer_step:e,answer_variants:o,view_step:i}})}}}};async function vn(){try{let n={...it.data};it.referrer&&(n.referrer=it.referrer);let t=await W("/mod/stat/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:n,device:{type:flexbe_cli.run.device_type,width:flexbe_cli.resize.clientWidth,height:flexbe_cli.resize.clientHeight,dpi:window.devicePixelRatio,browser:navigator.userAgent}}});H.u_id=t.u_id,flexbe_cli.helpers.cookie.set("f_uid",t.u_id,{Path:"/"}),b.trigger("user_created")}catch(n){console.warn("Cookie visit not created",n)}}async function yn(){try{let n=await W("/mod/stat/visit/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:H.u_id}});n.v_id||console.warn("Visit was not registered",n)}catch(n){console.error("Visit was not registered",n)}}var ce=H;var Dt="||||",Ke=()=>0,wn=n=>{if(n<3)return n;let t=n%100;return t>=3&&t<=10?3:t>=11?4:5},xn=n=>{let t=n%10,e=n%100;return t===1&&e!==11?0:t>=2&&t<=4&&!(e>=12&&e<=14)?1:2},An=n=>{let t=n%10,e=n%100;return t===0||e>=11&&e<=19?0:t===1&&e!==11?1:2},$n=n=>n>=0&&n<=1?0:1,En=n=>n>=2?1:0,Sn=n=>n!==1?1:0,kn=n=>n%10===1&&n%100!==11?0:n%10>=2&&n%10<=9&&(n%100<11||n%100>19)?1:2,In=n=>n===1?0:n>=2&&n<=4?1:2,Cn=n=>{if(n===1)return 0;let t=n%10;return t>=2&&t<=4&&(n%100<10||n%100>=20)?1:2},Tn=n=>n%10!==1||n%100===11?1:0,Pn=n=>{let t=n%100;return t===1?0:t===2?1:t===3||t===4?2:3},On=n=>{if(n===1)return 0;let t=n%100;return n===0||t>=2&&t<=19?1:2},Mn=new Map([[["ar"],wn],[["ru","uk","bs","bs","sr","hr","be"],xn],[["fa","da","de","en","es","fi","el","he","hi","hu","hu","it","nl","no","pt","sv","tr","ka","kk","uz","af","ky","sq","az","et","sw","mn","tg","so"],Sn],[["fr","tl","hy","pt-br"],En],[["lt"],kn],[["lv"],An],[["cs","sk"],In],[["pl"],Cn],[["is","mk"],Tn],[["sl"],Pn],[["ro"],On],[["hi","zu","bn"],$n],[["id","ja","ko","lo","ms","th","zh","vi"],Ke]]),Ln=[...Mn].reduce((n,[t,e])=>(t.forEach(i=>{n[i]=e}),n),{});function Ye(n,t){return(Ln[n]||Ke)(t)}var _t=class{constructor(t){this.locale=void 0,this.phrases={},this.keyDelimiter="::",this.interpolateRegexp=/%([^%]*)%/g,this.warn=void 0,this.locale=t.locale||"en",this.warn=t.warn||console.warn.bind(console),this.extend(t.phrases||{})}extend(t,e){Object.entries(t).forEach(([i,o])=>{if(typeof e=="string"&&(i=`${e}${this.keyDelimiter}${i}`),typeof o=="object")this.extend(o,i);else if(o.startsWith("{")&&o.endsWith("}"))try{let s=JSON.parse(o);this.phrases[i]=["zero","one","two","few","many","other"].map(r=>s[r]).filter(r=>typeof r=="string").join(Dt)}catch{this.phrases[i]=o}else this.phrases[i]=o})}tr(t,e={}){if(t==null)return"";typeof e=="number"?e={count:e}:e.count??(e.count=1);let i="";return this.phrases[t]?i=String(this.phrases[t]):(i=String(t??""),this.warn(`Missing translation for key: ${t}`)),i.includes(Dt)&&(i=this.pluralize(i,e.count)),i.includes("%")?this.interpolate(i,e):i}pluralize(t,e){let i=Ye(this.locale,e),o=t.split(Dt);return o.at(i)||o.at(-1)}interpolate(t,e={}){return String(t).replace(this.interpolateRegexp,(i,o)=>{var s;return(s=e[o])!=null?s:i})}};var Xe=(n,t=2,e=",",i=".")=>{let o,s;Number.isNaN(t=Math.abs(t))&&(t=2),o=`${parseInt(n=(+n||0).toFixed(t),10)}`,(s=o.length)>3?s%=3:s=0;let r=s?o.substr(0,s)+i:"",a=o.substr(s).replace(/(\d{3})(?=\d)/g,`$1${i}`),l=t?e+Math.abs(n-o).toFixed(t).replace(/-/,"0").slice(2):"";return r+a+l},Qe={dateFormat:{dateLiteral:"/",dateMask:"DD/MM/YYYY",firstDay:1,dateTimeLiteral:", ",hour12:!1,timeLiteral:":",timeMask:"HH:MM"},translation:{},_p:null,tr(n,t){return this._p||(this._p=new _t({locale:flexbe_cli.vars.page.language,phrases:this.translation})),this._p.tr(n,t)},parseMoney(n,t=2){n=String(n).replace(/,/g,".").replace(/ /g,"").replace(/(?!^)-/g,"").replace(/^\./g,"0.");let e=n.replace(/[^\d.]/g,""),i=((e.match(new RegExp(`\\.\\d{1,${t}}$`))||[])[0]||"").replace(/\D/g,""),o=e.replace(new RegExp(`\\.${i}$`),"");o=parseInt(o.replace(/[^\d-]/g,""),10)||0,parseInt(i,10)||(i="");let s=parseFloat(i?`${o}.${i}`:o);return/^-/.test(n)?-s:s},formatMoney(n,{currencyFormat:t=flexbe_cli.vars.site.currencyFormat,currencyData:e=flexbe_cli.vars.site.currencyData,freeLabel:i=!1,useNonBreakingSpace:o=!1}={}){if(n=parseFloat(n),!n&&i)return Qe.tr("cart::free_price");let s=t.str,r=t.d,a=Math.abs(n)>=1e4?t.t:"",l=t.d_force||parseInt(n,10)!==n?e.decimals:0,c=Xe(Math.abs(n),l,r,a),u=c;return s&&(u=s.replace(":value",c).replace(":symbol",e.symbol),o&&(u=u.replace(/\s/g,"&nbsp"))),n<0&&(u=`-${u}`),u.trim()},formatNumber(n,t,e=this.currencyFormat){let i=e.d,o=Math.abs(n)>=1e4?e.t:"";return t=t??(e.d_force||parseInt(n,10)!==n?this.currencyData.decimals:0),Xe(Math.abs(n),t,i,o)},animateNumber({target:n,from:t,to:e,asMoney:i,freeLabel:o=!0,duration:s,easing:r}){if(!n)return!1;let a=$(n);t==null&&(t=this.parseMoney(a.text())||"");let l=Math.abs(t-e);if(t===e)return;if(n._animation&&(n._animation.pause(),n._animation.reset()),i&&(!e||!t)||l<3||typeof anime!="function")a.text(i?this.formatMoney(e,{freeLabel:o}):e);else{let u={value:t};s==null&&(s=Math.max(150,Math.min(l*.3,650))),r==null&&(r="linear"),n._animation=anime({targets:u,value:e,duration:s,easing:r,update:()=>{let p=Math.floor(u.value),f=i?this.formatMoney(p,{freeLabel:o}):p;a.text(f)},complete:()=>{let p=i?this.formatMoney(e,{freeLabel:o}):e;a.text(p)}})}},...flexbe_cli.locale},M=Qe;var Fn=".js-hover",Ze="hover",ue={init(){this.adaptiveHoverInit(),this.initIosHacks(),this.initFontsHacks()},adaptiveHoverInit(){let n="touchstart.adaptive_hover_in";flexbe_cli.run.is_desktop&&(n=`${n} mouseenter.adaptive_hover_in`),$(document).on(n,Fn,t);function t(e){if(globalThis.accessabilityEnabled)return;let i=$(e.currentTarget),o=`adaptive_hover_out_${Math.floor(Math.random()*1e6)}`;i.addClass(Ze),flexbe_cli.run.is_desktop&&i.one(`mouseleave.${o}`,s),$(document).one(`touchend.${o}`,s);function s(){i.off(`.${o}`),$(document).off(`.${o}`),i.removeClass(Ze)}}},initIosHacks(n="body"){flexbe_cli.run.is_ios&&($("> *",n).off("click.iosHacks").on("click.iosHacks",()=>!0),$("a, [data-action-target]",n).off("click.iosHacks").on("click.iosHacks",()=>!0))},initFontsHacks(){if(!flexbe_cli.run.is_android)return;let n=getComputedStyle(document.documentElement),t=parseFloat(n.getPropertyValue("--1rem")),e=parseFloat(n.getPropertyValue("font-size")),i=t/e;i!==1&&!Number.isNaN(t)&&!Number.isNaN(i)&&document.documentElement.style.setProperty("--1rem",`${t*i}px`)}};var Je={content:"",contentAsHTML:!0,theme:"dark",animation:"fall",animationDuration:[250,180],delay:[180,100],position:"top",autoClose:!0,hideOnClick:!1,interactive:!1,distance:3,maxWidth:350,IEmin:12,trigger:"custom",triggerOpen:{click:!1,touchstart:!1,mouseenter:!0},triggerClose:{click:!1,originClick:!1,mouseleave:!0,touchleave:!0}},Dn=async()=>{let n=flexbe_cli.vars,t=n.page.themeId,e=n.globals.versionId,i=()=>R(["/_s/lib/jquery/tooltipster/tooltipster.patched.min.js",`/_s/build/theme/${t}/_tooltipster.css?${e}`]);return document.readyState==="complete"?i():new Promise(o=>window.addEventListener("load",()=>i().then(o),{once:!0}))},ti={async init(n,t={}){var e,i;if(!n)return!1;await Dn();let o,s=$(n),r={...Je,...t,content:(e=(i=t.content)!=null?i:s.attr("data-tip"))!=null?e:n.innerHTML};r.theme=`tooltipster-${(s.attr("data-theme")||r.theme||Je.theme).replace("tooltipster-","")}`,r.maxWidth=parseInt(s.attr("data-width"),10)||r.maxWidth,r.position=s.attr("data-tip-position")||r.position;let a=r.content||"";if($.fn.tooltipster==null)return console.warn("Tooltipster is not loaded"),!1;try{o=s.tooltipster("instance")}catch{}if(!(!o&&!a))return o?(clearTimeout(o._contentTmt),a&&a!==o.content()?(o.content(a),o.enable()):a||this.destroy(n)):(n.tooltipstered=!0,s.tooltipster(r),o=s.tooltipster("instance"),o.on("created",()=>{s.attr("data-tooltipstered","true"),o._$tooltip.addClass("editor-ui")}),o.on("destroy",()=>{n.tooltipstered=!1,s.removeAttr("data-tooltipstered")}),o.on("ready",()=>{o.reposition()})),t.show&&o.open(),o},destroy(n){if(!n)return!1;let t,e=$(n);try{t=e.tooltipster("instance")}catch{}t&&(t.destroy(),n.tooltipstered=!1,e.removeAttr("data-tooltipstered"))}};var ei=!1,de="f_cookies_allowed",fe=class{constructor(){this.cookieApplied=!1,this.observer=null,this.params={show:0,consent_mode:"click",use_custom_warning_text:0,custom_warning_text:"",policy_uri:"",style:"right_bottom",show_decline_button:1,decline_button_text:"",button_text:"",link_text:"",use_policy:0}}init(){setTimeout(()=>requestAnimationFrame(()=>{this.params={...this.params,...flexbe_cli.vars.site.cookiesWarning||{}},!(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.theme_id===99||!this.params.show||localStorage.getItem(de)||ei)&&this.createNotify()}),1e3)}createNotify(){let t=this.params,e=$("body"),i=P.viewportHeight/2,o="/\\r\\n|\\r|\\n/g",s=flexbe_cli.scroll.latest,r=0;ei=!0,+t.use_custom_warning_text&&t.custom_warning_text?this.content=t.custom_warning_text.replace(o,"<br />"):this.content=flexbe_cli.locale.tr(t.style==="center_compact"?"cookies::compact_text":"cookies::long_text");let a=t.button_text&&t.use_custom_warning_text?t.button_text.replace(o,"<br />"):flexbe_cli.locale.tr("cookies::button"),l=t.decline_button_text&&t.use_custom_warning_text?t.decline_button_text.replace(o,"<br />"):flexbe_cli.locale.tr("cookies::button_decline"),c=t.link_text?t.link_text.replace(o,"<br />"):flexbe_cli.locale.tr("cookies::button_link"),u=t.policy_uri?t.policy_uri.replace(o,"<br />"):"/legal/cookie-policy/",p=+t.use_policy?"show":"",f=t.consent_mode==="click"||t.style!=="center_compact",m=+t.show_decline_button&&t.consent_mode==="click",d=t.style==="center_long"?"is-dark":"is-light",h=m?`
            <div class="cookies-button decline scrollable show">
                ${l}
            </div>
        `:"",g=f?`
            <div class="cookies-button primary scrollable show">
                ${a}
            </div>
        `:"",_=t.style==="popup"?'<div class="cookies-overlay"></div>':"",y=t.consent_mode!=="click"&&["popup","right_bottom","center_compact"].includes(t.style)?`
            <div class="cookies-close">
                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 6L13 0L14 1L8 7L14 13L13 14L7 8L1 14L0 13L6 7L0 1L1 0L7 6Z"/>
                </svg>
            </div>
        `:"",A=$(`
            <div class="cookies-wrap style--${t.style} ${d}">
                ${_}
                <div class="cookies-container">
                    <div class="cookies-content scrollable">
                        <span>
                            ${this.content}
                            <a href="${u}" target="_blank" class="cookies-button-more ${p}">
                             ${c}
                            </a>
                        </span>
                    </div>
                    ${m||f?`
                        <div class="cookies-button-container">
                            ${h}
                            ${g}
                        </div>
                    `:""}
                    ${y}
                </div>
            </div>
        `);e.find(".cookies-wrap").remove(),e.append(A),this.setupBodyObserver(e,A),t.style==="popup"&&flexbe_cli.scroll.scrollLock.lock();let v=()=>{let w=$(".cookies-wrap");w.removeClass("show"),e.removeClass("cookies-warning--show"),t.style==="popup"&&flexbe_cli.scroll.scrollLock.unlock(),this.observer&&(this.observer.disconnect(),this.observer=null),setTimeout(()=>{w.remove()},1e3)},j=()=>{localStorage.setItem(de,"declined")},D=()=>{this.cookieApplied||(this.cookieApplied=!0,typeof window.applyCookies=="function"&&window.applyCookies(),localStorage.setItem(de,"allowed"),document.removeEventListener("scroll",J),$(document).off("click.cookies"))},J=()=>{let w=Math.max(flexbe_cli.scroll.latest-s,s-flexbe_cli.scroll.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{s=flexbe_cli.scroll.latest,r+=w,r>=i&&D()},200)};t.consent_mode==="open"?D():t.consent_mode==="interaction"&&setTimeout(()=>{document.addEventListener("scroll",J,{passive:!0})},500),A.outerWidth(),A.addClass("show"),e.addClass("cookies-warning--show"),A.on("click.cookies",".cookies-button.primary, .cookies-close",()=>{v(),D()}),A.on("click.cookies",".cookies-button.decline",()=>{j(),v()}),t.consent_mode==="interaction"&&$(document).on("click.cookies","a, [data-component]",()=>D())}setupBodyObserver(t,e){this.observer=new MutationObserver(i=>{i.forEach(o=>{o.type==="childList"&&e.length&&e[0]!==t.children().last()[0]&&t.append(e)})}),this.observer.observe(t[0],{childList:!0})}},ii=new fe;var ni=!1,nt,oi=n=>{if(!nt.size){ni=!1;return}requestAnimationFrame(oi),Array.from(nt).forEach(([t,e])=>{if(e.last>=n)return;let i=typeof e.fps=="function"?e.fps():e.fps;(!i||n-e.last>=1e3/i)&&(e.last=n,t(n))})};function si(n,t=0){return nt||(nt=new Map),nt.set(n,{last:0,fps:t}),ni||requestAnimationFrame(oi),()=>{nt.delete(n)}}var pe,he,ri=!0,Rn=100,zn=200,qn=150,Q="position-fixed",Nn="position-sticky",me={map:[],createMap(){return $('[data-is="block"][data-fixed="true"]').toArray().map((t,e)=>{let i=$(t),o=i.attr("data-fixed-wrapper")||"self",s=i.attr("data-fixed-ignore-adaptive"),r=o==="self"?i:i.find(o),a=i.find(".fixed-area").eq(0);if(!a.length||!r.length)return null;let l=!!i.data("fixed-animation"),c=!!i.data("sticky"),u=a.closest("[data-static-contrast]").attr("data-static-contrast")||a.closest("[data-contrast]").attr("data-contrast"),p=a.closest("[data-fixed-contrast]").attr("data-fixed-contrast")||u,f=Math.round(r.outerHeight()),{top:m}=Lt(r[0])||{},d=m+f,h=f;return l&&(a.hasClass(Q)?h=Math.round(a.outerHeight()):(a.addClass(Q),h=Math.round(a.outerHeight()),a.removeClass(Q))),{index:e,$block:i,$wrap:r,$fixed:a,top:m,bottom:d,height:f,heightFixed:h,contrastStatic:u,contrastFixed:p,isSticky:c,ignoreAdaptive:s,hasFixedAnimation:l,isFixed:!1,isReplaced:!1}}).filter(t=>{if(!t)return!1;let e=flexbe_cli.resize.responsiveMode,i=t.$block.attr("data-hidden");return!(e===i||e==="mobile"&&t.ignoreAdaptive)})},modifyMap(n,t){let e=0,i=0;return n.forEach((o,s)=>{let r=s&&n[s-1],a=Math.max(0,(r?.bottom||0)-o.top),l=t+e-a;o.isFixed=o.hasFixedAnimation?l>o.bottom+Rn:l>o.top,o.fixOffset=e-a,o.isSticky&&o.isFixed&&(e+=o.heightFixed-a),o.isFixed&&(i+=o.heightFixed),o.replaceOffset=0,r&&!r.isSticky&&t+r.fixOffset+r.heightFixed>o.top&&(r.replaceOffset=Math.min(r.fixOffset+r.heightFixed,t+r.fixOffset+r.heightFixed-o.top))}),{allFixedHeight:i}},applyMap(n,t){let e=!n.applied&&!ri;n.forEach(i=>{let o=i.$fixed[0].isFixed,s=i.isFixed,r=i.isSticky;if(flexbe_cli.run.is_preview||(s=!1,r=!1),o!==s||e)if(i.$fixed[0].isFixed=s,i.$fixed.toggleClass(Nn,s&&r),i.contrastStatic&&i.contrastStatic!==i.contrastFixed&&i.$fixed.attr("data-contrast",s?i.contrastFixed:i.contrastStatic),i.hasFixedAnimation)if(clearTimeout(i._fixedAnimationBouncer),s)i.$wrap.css("height",`${i.height}px`),i.$fixed.removeClass("fade-out"),!i.replaceOffset&&!i.$fixed.hasClass(Q)&&(i.$fixed.addClass(`${Q} fade-in`),i._fixedAnimationBouncer=setTimeout(()=>{i.$fixed.removeClass("fade-in")},zn));else{let a=t>i.height;i.$fixed.removeClass("fade-in"),!i.replaceOffset&&n.applied&&a&&i.$fixed.addClass("fade-out"),i._fixedAnimationBouncer=setTimeout(()=>{i.$wrap.css("height",""),i.$fixed.removeClass(`${Q} fade-out`)},a?qn:0)}else i.$wrap.css("height",s?`${i.height}px`:""),i.$fixed.toggleClass(Q,s);if(s?(i.$fixed[0].style.setProperty("top",`${i.fixOffset}px`,"important"),i.$fixed[0].style.setProperty("transform",i.replaceOffset?`translateY(-${i.replaceOffset}px)`:"none","important")):(i.$fixed[0].style.removeProperty("top"),i.$fixed[0].style.removeProperty("transform")),o!==s){let a=i.$block[0]._core;a&&a.updateTween({fixed:s})}}),ri=!1,n.applied=!0,this.map=n},getAllFixedHeight(n){let{allFixedHeight:t}=this.modifyMap($.extend([],this.map||[]),n);return t},initFixed(){let n=this.createMap();he=null,pe&&pe(),n.length&&(pe=si(()=>{let t=window.scrollY;he!==t&&(he=t,this.modifyMap(n,t),this.applyMap(n,t))},n.length>1?90:30))},init(){new ResizeObserver(()=>{this.initFixed()}).observe(document.body)}};var ge=class{constructor(t,e={}){this.components=null,this.inited=!1,this.updated=!1,this.loaded=!1,this.ready=!1,this.isPure=!1,this.isVisible=null,this.inScreen=!1,this.inBeside=!1,this.inView=!1,this.inFocus=!1,this.wasVisible=null,this.wasScreen=!1,this.wasBeside=!1,this.wasView=!1,this.wasFocus=!1,this.$area=void 0,this.area=void 0,this.$content=void 0,this.content=void 0,this.$root=void 0,this.root=void 0,this.is=void 0,this.id=void 0,this.template_id=void 0,this.tween=void 0,this.type=void 0;let i=$(t),o=i.attr("data-is"),s=i.attr("data-id"),r=o==="zone"?"e":o[0],a=i.attr(`data-${r}-id`);this.$area=i,this.area=i[0],this.$content=i,this.content=this.$content[0],this.$root=i,this.root=i[0],this.is=o,this.id=s,this.template_id=a,this.tween={},this.type=JSON.parse(i.attr(`${r}-type`)||"[]"),Object.keys(e).forEach(l=>{let c=Object.getOwnPropertyDescriptor(e,l);if("value"in c){let u=e[l];typeof u=="object"?this[l]=$.extend(!0,Array.isArray(u)?[]:{},u):this[l]=u}else Object.defineProperty(this,l,c)}),["_onVisible","_onBeside","_onFocus","_onScreen","_onView","_onResize","_onOpen","_onClose","_sendEvent"].forEach(l=>{this[l]=this[l].bind(this)})}onInit(t){}onUpdate(t){}onLoad(t){}onDestroy(t){}onVisible(t){}onBeside(t){}onFocus(t){}onScreen(t){}onView(t){}onResize(t){}onOpen(t){}onClose(t){}onMsg(t,e){}init(t="init",e={}){this.components=(this.components||[]).filter(i=>i&&typeof i=="function"),t==="init"?this._onInit(e):t==="update"&&this._onUpdate(e),this._inheritEvents(),(t==="init"||t==="update"&&e.templateRendered)&&this._onLoad(e)}_inheritEvents(){"onHideShowUI"in this&&(flexbe_cli.events.off(`hideShowUI.core_${this.id}`),flexbe_cli.events.on(`hideShowUI.core_${this.id}`,t=>{var e;return(e=this.onHideShowUI)==null?void 0:e.call(this,t)}))}_sendEvent(t,e){let i=new CustomEvent(t,{detail:e});this.area.dispatchEvent(i)}_onInit(t){this.inited=!0,this.onInit(t),this._sendEvent("init",t),requestAnimationFrame(()=>this.updateTween())}_onUpdate(t){this.inited=!0,this.onUpdate(t),this._sendEvent("update",t),this.updateTween({force:!0})}_onLoad(t){this.loaded=!0,this.onLoad(t),this._sendEvent("load",t)}_onResize(t={}){this.isVisible&&(this.onResize(t),this._sendEvent("resize",t))}_onDestroy(t){this.$area.off(".inherit"),this.onDestroy(t),this._sendEvent("destroy",t)}_onMsg(t,e){this.onMsg(t,e)}_onVisible({state:t,force:e}){if(this.isVisible==null){this.isVisible=t,this.wasVisible=t;return}if(this.isVisible===t&&!e)return;let i=t?!this.wasVisible:void 0,o=i==null?{state:t}:{state:t,first:i};this.isVisible=t,this.onVisible(o),this._sendEvent("visible",o),t&&(this.wasVisible=!0)}_onFocus({state:t,force:e}){if(this.isVisible||(t=!1),this.inFocus===t&&!e)return;let i=t?!this.wasFocus:void 0,o=i==null?{state:t}:{state:t,first:i};this.inFocus=t,this.onFocus(o),this._sendEvent("focused",o),t&&(this.wasFocus=!0)}_onScreen({state:t,force:e}){if(this.isVisible||(t=!1),this.inScreen===t&&!e)return;let i=t?!this.wasScreen:void 0,o=i==null?{state:t}:{state:t,first:i};this.inScreen=t,this.onScreen(o),this._sendEvent("screen",o),t&&(this.wasScreen=!0)}_onView({state:t,force:e}){if(this.isVisible||(t=!1),this.inView===t&&!e)return;let i=t?!this.wasView:void 0,o=i==null?{state:t}:{state:t,first:i};this.inView=t,this.is==="block"&&i&&requestAnimationFrame(()=>{Ft.startTransitions(this.$area)}),this.onView(o),this._sendEvent("view",o),t&&(this.wasView=!0)}_onBeside({state:t,force:e}){if(this.isVisible||(t=!1),this.inBeside===t&&!e)return;let i=t?!this.wasBeside:void 0,o=i==null?{state:t}:{state:t,first:i};this.inBeside=t,this.onBeside(o),this._sendEvent("beside",o),t&&(this.wasBeside=!0)}updateTween(t={}){}_onOpen(t){this.updateTween(),this.onOpen(t),this._sendEvent("open",t)}_onClose(t){this.updateTween(),this.onClose(),this._sendEvent("close",t)}},G=ge;var _e=class extends G{constructor(t,e){super(t,e),this.is="block",this.$block=this.$area,this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],this.abtestVariant=this.$area.attr("data-abtest-variant"),this.abtestId=this.abtestVariant&&this.$area.attr("data-abtest-id")}_onUpdate(t){this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}updateTween({force:t=!1,fixed:e=!1}={}){if(!this.inited)return!1;let i=this.area,o=0,s=i.offsetWidth,r=i.offsetHeight;for(;i;)o+=i.offsetTop,i=i.offsetParent;let a=o+r,l=!!(s||r),c=this.tween.width==null&&this.tween.height==null,u=t||s!==this.tween.width||r!==this.tween.height,p=y(),f=A(),m=v();this.tween.start=o,this.tween.end=a,this.tween.width=s,this.tween.height=r,this.tween.position=p,this.tween.positionAbs=f,this.tween.positionCenter=m;let d=l&&m>0&&m<1,h=d||D(),g=h||j(),_=g||J();return this._onVisible({state:l}),!c&&u&&this._onResize({force:t}),this._onBeside({force:t,state:_}),this._onScreen({force:t,state:g}),this._onView({force:t,state:h}),this._onFocus({force:t,state:d}),this._sendEvent("tween",{tween:this.tween,force:t}),u;function y(){return 1/(r||1)*(flexbe_cli.scroll.latest-o)}function A(){let w=o-flexbe_cli.resize.clientHeight;return 1/(a-w)*(flexbe_cli.scroll.latest-w)}function v(){let w=r||1,tt=flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight/2,Ri=o+w/2;return(tt-Ri+w/2)/w}function j(){return e?!0:f>=0&&f<=1}function D(){if(e)return!0;let w=Math.min(r/3,flexbe_cli.resize.clientHeight/4);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>=o+w&&flexbe_cli.scroll.latest<=a-w}function J(){if(e)return!0;let w=Math.max(r/2,flexbe_cli.resize.clientHeight/3);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>o-w&&flexbe_cli.scroll.latest<a+w}}},ai=_e;var be=class extends G{constructor(t,e){super(t,e),this.is="element";let i=this.$area.closest("[data-cloned]");this.isClone=i.attr("data-cloned")||!1,this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],this.$root=this.$area.closest(".b_block, .m_modal, .w_widget"),this.root=this.$root[0];let o=flexbe_cli.entity.closestEntity(this.area.parentNode);o?(this.$parent=o.$area,this.parent=o.area):(this.$parent=this.$area.parents("[data-is]").eq(0),this.parent=this.$parent[0],console.warn("Parent core instance not created for element",this.area))}_onUpdate(t){this.$area.off(`.inherit.${this.id}`),this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}_onDestroy(t){super._onDestroy(t),this.$area.off(".inherit"),this.$parent.off(`.inherit.${this.id}`)}_inheritEvents(){super._inheritEvents();let t=`.inherit.${this.id}.${this.isClone?`clone${Number(this.isClone)}`:"original"}`;this.$parent.off(t),this.$parent.on(`tween${t}`,e=>{this.updateTween(e.detail||{})}),["visible"].forEach(e=>{this.$parent.on(`${e}${t}`,()=>{this.updateTween({})})}),["_onOpen","_onClose","_onDestroy"].forEach(e=>{let i=`${e.replace("_on","").toLowerCase()}${t}`;this.$parent.on(i,(o,...s)=>{!s.length&&o.detail&&(s[0]=o.detail),this[e](...s)})})}updateTween({force:t}={}){let e=this.content||this.area,i=this.parent&&this.parent._core,o=this.root&&this.root._core;if(!i||!this.inited)return;let s=this.tween.width==null&&this.tween.height==null,r=i.isVisible,a=i.inBeside,l=a,c=l,u=l,p=!1;if(!(s&&i.isVisible&&!a)){if(r&&a){let f=e.offsetWidth,m=e.offsetHeight,d=flexbe_cli.resize.clientHeight;if(r=!!(f||m),p=t||f!==this.tween.width||m!==this.tween.height,this.tween.width=f,this.tween.height=m,r&&o&&o.is==="block"){let{top:h,bottom:g}=e.getBoundingClientRect();a=g>-(d/3)&&h<d+d/3,l=a&&l&&g>0&&h<d,u=l&&u&&h<=d/2&&h+m>=d/2;let _=Math.min(m/3,flexbe_cli.resize.clientHeight/4);c=u||l&&c&&h+_>0&&g-_<d}}this.isVisible!==r&&this._onVisible({force:t,state:r}),!s&&p&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:l}),this._onView({force:t,state:c}),this._onFocus({force:t,state:u}),this._sendEvent("tween",{tween:this.tween,force:t})}}},ve=be;var Vn=()=>!(flexbe_cli.is_admin&&(window.parent.flexbe.modal.visible||[]).length),L={opened:new Map,$list:$(".modal-list"),init(){let n=new URLSearchParams(location.search).get("m_id");if(flexbe_cli.vars.globals.isScreenshot&&n)return this.$list.addClass("noanimate"),this.open({id:n}),!1;this.dispatchEvents()},dispatchEvents(){let n=$("body");n.on("bringIntoView.core-modal",".m_modal",s=>{let r=s.currentTarget.dataset.id;r&&this.open({id:r})}),flexbe_cli.events.on("ui_modal_open.core_modal",(s={})=>{this.open(s)}),flexbe_cli.events.on("ui_modal_close.core_modal",(s={})=>{this.close(s)}),n.on("click.modal-close",".m_modal .close",s=>{s.preventDefault();let a=$(s.currentTarget).closest(".m_modal.show").attr("data-id");this.close({id:a})});let t,e,i,o={x:0,y:0};n.off(".modal-close-overlay"),n.on("click.modal-close-clickout",".container-list",()=>{!flexbe_cli.run.is_preview||!this.opened.size||this.opened.forEach((s,r)=>{let{modal:a}=this.find(r)||{};a!=null&&a.hasAttribute("data-clickout")&&this.close({id:a.id})})}),n.on("pointerdown.modal-close-overlay pointerup.modal-close-overlay","[data-overlay]",s=>{if(!(!flexbe_cli.run.is_preview||!this.opened.size))if(s.type==="pointerdown"){let r=document.body.getBoundingClientRect();i=s.target===s.currentTarget||$(s.target).is(".modal-data")?s.target:null,o={x:s.pageX,y:s.pageY},t=s.target.clientWidth<=s.pageX,e=r.left>o.x||r.right<o.x}else i===s.target&&!t&&!e&&Math.sqrt((s.pageX-o.x)**2+(s.pageY-o.y)**2)<10&&setTimeout(()=>{this.close({id:$(i).closest(".m_modal").attr("data-id")})},50)}),$(window).off(".modal-close-esc").on("keyup.modal-close-esc",s=>{if(flexbe_cli.run.is_preview&&s.which===27&&Vn()&&this.opened.size){let r=[...this.opened.keys()].at(-1);this.close({id:r})}})},find(n){if(this.$list==null||!this.$list.length)return!1;let t=this.$list.find(`[data-id="${n}"]`);t.length||(t=this.$list.find(`._anchor[name="${n}"]`).closest(".m_modal"));let e=t.toArray(),i=e[0];return i?{modals:e,modal:i}:null},open({id:n,data:t={},options:e={}}={}){let{modal:i}=this.find(n)||{};if(!i)return console.warn("Modal not found",n),!1;let o=ot.bind(i);if(!o)return console.warn("Modal without core object,",`id: ${n},`,"modal: ",i),!1;let s=[...this.opened.keys()].at(-1);return!e.rise&&s&&s!=n&&this.close({id:s,openId:n}),this.opened.has(n)||(this.opened.set(n,{fromId:s,data:t,options:e}),o.open({fromId:s,data:t,options:e})),o.$area.css("zIndex",this.opened.size),!0},close({id:n,openId:t}={}){if(!n)return this.opened.forEach((o,s)=>{s!==t&&this.close({id:s,openId:t})});if(!this.opened.has(n))return!1;let{modal:e}=this.find(n)||{};if(!e)return;let i=ot.bind(e);return i?(i.close({openId:t}),i.$area.css("zIndex",""),this.opened.delete(n),!0):(console.warn("Modal doesnt have core object"),!1)}};var li=(n,t=0)=>(...e)=>new Promise(i=>{setTimeout(()=>i(n(...e)),t)}),st=(n,t=0)=>flexbe_cli.is_admin?n:li(n,t),k=(n,t=0,...e)=>li(n,t)(...e),rt=(n,t=0,...e)=>st(n,t)(...e),bt=(n,t=1)=>Array.from({length:Math.ceil(n.length/t)},(e,i)=>n.slice(i*t,i*t+t));var ye=class extends G{constructor(t,e){super(t,e),this.is="modal",this.isOpen=!1,this.$modal=this.$area}_onInit(t){super._onInit(t),flexbe_cli.is_admin&&L.opened.has(this.id)&&this.open(L.opened.get(this.id))}open({fromId:t,data:e,options:i={}}={}){var o,s;if(this.isOpen)return;this.isOpen=!0,this.lastOptions=i,this.lastScroll=z.latest;let r=this.$area.find(".modal-data > ._anchor").attr("name")||this.id;(i.hash||i.hash==null)&&(this._prevHash=window.location.hash,flexbe_cli.lockPopstate=!0,window.history.pushState(null,null,`#${r}`),flexbe_cli.lockPopstate=!1),L.$list.addClass("show"),this.$area.removeClass("noanimate"),this.$area.addClass("show"),flexbe_cli.run.is_preview&&this.$area.addClass("animation-forwards"),$("body").addClass("is-modal-open"),$('[data-w-id="CART"].show, .w_widget.show').length&&L.$list.addClass("rise");let a=this.$modal.find(".component-button").eq(0),l=(o=(s=a.offset())==null?void 0:s.top)!=null?o:0;!flexbe_cli.run.is_screen_mobile&&flexbe_cli.run.is_preview&&flexbe_cli.resize.viewportHeight>l+100&&a.focus(),setTimeout(()=>{this.$area.hasClass("pointerless")||z.scrollLock.lock(),L.$list.addClass("overlay"),this._onOpen({data:e}),this._onBeside({state:!0}),this._onScreen({state:!0}),this._onView({state:!0}),this._onFocus({state:!0}),typeof i.onOpen=="function"&&i.onOpen()},30),b.trigger("modal_opened",{id:this.id,fromId:t,data:e,options:i})}close({openId:t}={}){if(!this.isOpen)return;let e=this.lastOptions,i=!t&&!this.$area.siblings(".show").length;if(this.lastOptions={},this.isOpen=!1,(e.hash||e.hash==null)&&i&&/^#{1,2}/.test(window.location.hash)){let s=!this._prevHash||this._prevHash===window.location.hash?window.location.pathname:this._prevHash;flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,s),flexbe_cli.lockPopstate=!1}this.$area.removeClass("animation-forwards").addClass("noanimate");let o=parseInt(this.$area.css("--animationDuration"),10)||450;this.$area.removeClass("show noanimate"),flexbe_cli.run.is_preview&&this.$area.addClass("animation-backwards"),setTimeout(()=>{this.$area.removeClass("show hide animation-backwards"),i&&(L.$list.removeClass("show rise overlay fade-out"),window.location.hash!=="#cart"&&!this.$area.hasClass("pointerless")&&z.scrollLock.unlock(),$("body").removeClass("is-modal-open")),flexbe_cli.run.is_screen_mobile&&$("body, html").scrollTop(this.lastScroll)},flexbe_cli.is_admin?0:o),this._onClose(),this._onBeside({state:!1}),this._onScreen({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),typeof e.onClose=="function"&&e.onClose(this),b.trigger("modal_closed",{id:this.id,openId:t})}updateTween({force:t}={}){if(!this.inited)return!1;let e=this.area,i=e.offsetWidth,o=e.offsetHeight,s=this.tween.width==null&&this.tween.height==null,r=t||i!==this.tween.width||o!==this.tween.height,a=this.isOpen;return this.tween.width=i,this.tween.height=o,this._onVisible({force:t,state:a}),rt(()=>{!s&&r&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:a}),this._onView({force:t,state:a}),this._onFocus({force:t,state:a})}),rt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),r}},ci=ye;function N(n,t){if(!{}.hasOwnProperty.call(n,t))throw new TypeError("attempted to use private field on non-instance");return n}var Bn=0;function we(n){return"__private_"+Bn+++"_"+n}var jn=["id","is","area","content","isVisible","inBeside","inView","inFocus","inScreen","wasBeside","wasFocus","wasScreen","wasView","wasVisible"],Wn={beside:"beside",screen:"screen",view:"view",focus:"focused",visible:"visible",resize:"resize",open:"open",close:"close"};function ui(n){return n.split(" ").map(t=>{let[e,...i]=t.split(".");return[Wn[e]||e,...i,"publicApi"].join(".")}).join(" ")}var V=we("instances"),Z=we("core"),vt=we("callbacks"),at=class n{static create(t){return N(n,V)[V][t.id]&&N(n,V)[V][t.id].destroy(),N(n,V)[V][t.id]=new n(t),N(n,V)[V][t.id]}get size(){return{width:N(this,Z)[Z].tween.width,height:N(this,Z)[Z].tween.height}}constructor(t){Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:new Map}),N(this,Z)[Z]=t;let e=jn.reduce((i,o)=>{let s={...i};return s[o]={enumerable:!0,get(){return t[o]}},s},{});Object.defineProperties(this,e)}trigger(t,e){if(!t||typeof t!="string")return this;let i=new CustomEvent(t,{detail:e});return this.area.dispatchEvent(i),this}on(t,e){if(!t||typeof t!="string"||typeof e!="function")return this;let i=ui(t),o=s=>e.call(this,s.detail||s.originalEvent,s.originalEvent||s);return $(this.area).on(`${i}`,o),N(this,vt)[vt].set(e,o),this}off(t,e){let i=ui(t);return typeof e=="function"?$(this.area).off(i,N(this,vt)[vt].get(e)):$(this.area).off(i),this}destroy(){$(this.area).off(".publicApi")}};Object.defineProperty(at,V,{writable:!0,value:{}});var xe=class extends G{constructor(t,e){super(t,e),this.is="widget",this.$widget=this.$area}updateTween({force:t}={}){if(!this.inited)return!1;let e=this.area,i=e.offsetWidth,o=e.offsetHeight,s;this.isOpen!=null?s=!!this.isOpen:s=!!(i||o);let r=this.tween.width==null&&this.tween.height==null,a=!!t||i!==this.tween.width||o!==this.tween.height;return a&&(this.tween.width=i,this.tween.height=o),this._onVisible({force:t,state:s}),rt(()=>{!r&&a&&this._onResize({force:t}),this._onBeside({force:t,state:s}),this._onScreen({force:t,state:s}),this._onView({force:t,state:s}),this._onFocus({force:t,state:s})}),rt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),a}},di=xe;var $e=new WeakMap,Ae=new WeakMap;function fi(n,t,e){$e.set(n,setTimeout(()=>{$e.delete(n),e&&e()},t))}function lt(n,t,e=80){let i=typeof n=="object"?n:document.querySelector(`[data-id="${n}"]`),o=i?._core;if(o){if($e.get(o)){Ae.set(o,!0);return}o.updateTween({force:t}),fi(o,e,()=>{Ae.get(o)&&(Ae.set(o,!1),o.updateTween({force:t}),fi(o,e))})}}var pi={block:ai,modal:ci,widget:di,element:ve,zone:ve},hi={block:"data-b-id",modal:"data-m-id",widget:"data-w-id",zone:"data-e-id",element:"data-e-id",default:"data-t-id"},Hn=["beside","screen","focus","visible"],mi=new Map,gi=new WeakMap;function _i(n){let t="[data-is]",e=$(n);return[...e.filter(t).toArray(),...e.find(t).toArray()]}var ot={async init(){this._dispatchEvents(),await Promise.all([this.initArea($(".w_widget")),this.initArea(flexbe_cli.block.$list)]),await this.initArea(flexbe_cli.modal.$list)},async initArea(n,t={}){je(n);let e=_i(n),i=await Promise.all(bt(e,200).map(st(s=>s.map(r=>this.bind(r,t))))),o=(await Promise.all(i.flat())).filter(Boolean);return await Promise.all(o.map(s=>s.loaded||new Promise(r=>s.area.addEventListener("load",r,{once:!0})))),flexbe_cli.components.initInArea(n,t.templateRendered?"update":"init"),o},destroyArea(n,t={}){_i(n).forEach(i=>{let o=i._core;o&&(o._onDestroy(t),delete i._core)}),flexbe_cli.components.destroyInArea(n)},setClientJs(n,t,e){var i;mi.set(`${n}:${t}`,e),(i=e.components)==null||i.forEach(o=>{flexbe_cli.components.registerComponent(o)})},getClientJs(n,t){return n==="zone"&&(n="element"),mi.get(`${n}:${t}`)},bind(n,t={},e=!1){if(!n||!n.getAttribute)return null;let i=n.getAttribute("data-is");i=i==="zone"?"element":i;let o=n.getAttribute(hi[i]||hi.default);if(!o||!(i in pi))return null;let s=!n._core||!n._core.inited,r=!s&&(t.templateRendered||t.styleRendered),a=this.getClientJs(i,o)||{};if(a.isPure&&!e&&!n._core)return null;let l=n._core||new pi[i](n,a);return n._core=l,l&&(s||r)&&l.init(r?"update":"init",t),l},closestEntity(n,t=!1){let e;for(;n&&!e;){var i;if(n=(i=n)==null?void 0:i.closest("[data-id]"),!n||(e=this.bind(n,{},t),e))break;n=n.parentNode}return e},_dispatchEvents(){if(flexbe_cli.events.off(".core_entity"),flexbe_cli.events.on("forceUpdateTween.core_entity",(n,t)=>{lt(n,t)}),flexbe_cli.is_admin){let n=t=>document.querySelector(`[data-id="${t}"]`);flexbe_cli.events.on("layout_change.core_entity",t=>{t.action==="remove"&&this.destroyArea(n(t.id),t)}),flexbe_cli.events.on("entity_render:template:before.core_entity",async(t={})=>{let e=n(t.id);e&&this.destroyArea(e,t)}),flexbe_cli.events.on("entity_render:template.core_entity",async t=>{let e=n(t.id);e&&await this.initArea(e,t)}),flexbe_cli.events.on("client_msg.core_entity",t=>{if(!t||!t.id||!t.is)return;let e=n(t.id);e!=null&&e._core&&e._core._onMsg(t.msg,t.data)})}},createPublicAPI(n){let t,e=()=>(t||(t=document.querySelector(`[data-id="${n}"]`)),t),i=a=>{let l=this.closestEntity(a,!0);if(!l)return null;let c=gi.get(l);return c?c.destroy():(c=at.create(l),gi.set(l,c)),c},s={require:R,subscribe:(a,l,c)=>{let u=e();Hn.includes(a)&&i(u);let p=new AbortController,f=()=>p.abort(),m=d=>{var h;if(!d.currentTarget.contains(d.target))return;d.stopPropagation();let g=(h=d.detail.state)==null||h?"in":"out";(!c.state||c.state==="all"||c.state===g)&&(l(d),c.once&&f())};return u.addEventListener(a,m,{signal:p.signal}),f},sectionApi:null,modalApi:null,widgetApi:null,elementApi:null,isEditor:flexbe_cli.is_admin,isView:!flexbe_cli.is_admin},r={get(a,l,c){let u=e();return l==="elementApi"?i(u):l==="sectionApi"?i(u.closest(".b_block")):l==="modalApi"?i(u.closest(".m_modal")):l==="widgetApi"?i(u.closest(".w_widget")):Reflect.get(a,l,c)}};return new Proxy(s,r)}};var Ee={$list:$(".container-list").eq(0),$blocks:$(".b_block"),init(){this.dispatchEvents()},dispatchEvents(){let n=()=>{this.$blocks.each((t,e)=>lt(e,!1))};$(window).on("resized.flexbe_block",$.debounce(()=>n(),20)),$(document).on("documentresized.flexbe_block",$.debounce(()=>n(),20)),window.addEventListener("scroll",$.throttle(()=>{this.$blocks.each((t,e)=>lt(e,!1))},16*6),{passive:!0}),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.flexbe_block").on("layout_change.flexbe_block",t=>{!t||!["layout","block"].includes(t.is)||(this.$blocks=$(".b_block"),this.$blocks.each((e,i)=>lt(i,!1)))})}};var Gn=n=>typeof n=="string"?new Date(n.slice(0,19).replace("T"," ")):n,bi=({date:n,timezone:t,format:e="date"})=>{if(!n||!t)return null;let i=new Date(Gn(n)),o=new Date,s=new Date(o.toLocaleString("en-US",{timeZone:t}));o.setMilliseconds(0),s.setMilliseconds(0);let r=o.getTime()-s.getTime(),a=i.getTime()-r;return e==="milliseconds"?a:new Date(a)};var vi=(n,t,e)=>!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length?!1:t.every((i,o)=>n?e.includes(i):e[o]===i);var sr=vi.bind(null,!0),rr=vi.bind(null,!1);var vr=Object.freeze({value:"fill",title:"FILL",auto:!0,selectValue:"fill"}),yr=Object.freeze({value:"auto",title:"AUTO",auto:!0,selectValue:"auto"}),wr=Object.freeze({value:"auto",title:"HUG",auto:!0,selectValue:"auto"}),xr=Object.freeze({value:"px",title:"PX",step:1,altStep:5}),Ar=Object.freeze({value:"pt",title:"PT",step:1,altStep:.1}),$r=Object.freeze({value:"em",title:"EM",step:.1,altStep:.01}),Er=Object.freeze({value:"rem",title:"REM",step:.1,altStep:.01}),Sr=Object.freeze({value:"vh",title:"VH",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vh_tip")}),kr=Object.freeze({value:"vw",title:"VW",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vw_tip")}),Ir=Object.freeze({value:"cqw",title:"CQW",step:1,altStep:.1}),Cr=Object.freeze({value:"cqw",title:"CQH",step:1,altStep:.1}),Tr=Object.freeze({value:"ch",title:"CH",step:1,altStep:5,tip:typeof tr=="function"&&tr("editor::units::ch_tip")}),Pr=Object.freeze({value:"%",title:"%",step:1,altStep:.1});function Se(n,t={}){return n?Yn(n,t.type||"click",{bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,relatedTarget:t.relatedTarget}):!1}function Yn(n,t,e={}){let i,o="",s={click:"MouseEvent",dblclick:"MouseEvent",mousedown:"MouseEvent",mouseup:"MouseEvent",mouseover:"MouseEvent",mousemove:"MouseEvent",mouseout:"MouseEvent",mouseenter:"MouseEvent",mouseleave:"MouseEvent",contextmenu:"MouseEvent",keydown:"KeyboardEvent",keyup:"KeyboardEvent",keypress:"KeyboardEvent",focus:"FocusEvent",blur:"FocusEvent",focusin:"FocusEvent",focusout:"FocusEvent",input:"InputEvent",change:"Event",submit:"Event",reset:"Event",touchstart:"TouchEvent",touchmove:"TouchEvent",touchend:"TouchEvent",touchcancel:"TouchEvent",scroll:"UIEvent",resize:"UIEvent",select:"UIEvent",wheel:"WheelEvent",drag:"DragEvent",dragstart:"DragEvent",dragend:"DragEvent",dragenter:"DragEvent",dragover:"DragEvent",dragleave:"DragEvent",drop:"DragEvent",copy:"ClipboardEvent",cut:"ClipboardEvent",paste:"ClipboardEvent",custom:"CustomEvent"};switch(o=s[t]||s.custom,o){case"MouseEvent":i=new MouseEvent(t,e);break;case"KeyboardEvent":i=new KeyboardEvent(t,e);break;case"FocusEvent":i=new FocusEvent(t,e);break;case"TouchEvent":i=new TouchEvent(t,e);break;case"UIEvent":i=new UIEvent(t,e);break;case"WheelEvent":i=new WheelEvent(t,e);break;case"InputEvent":i=new InputEvent(t,e);break;case"DragEvent":i=new DragEvent(t,e);break;case"ClipboardEvent":i=new ClipboardEvent(t,e);break;case"CustomEvent":i=new CustomEvent(t,e);break;default:i=new Event(t,e)}return n.dispatchEvent(i)}function wi(n,t=!1){let e=$(n),i=t?{}:e.data("product");if(i===!1)return!1;if(i||(i=$(n).closest("[data-product-item]").find("[data-product-action]").data("product")),(i==null||typeof i!="object"||Array.isArray(i))&&(i={img:e.attr("data-product-image"),title:e.attr("data-product-name"),price:e.attr("data-product-price"),count:e.attr("data-product-count"),productId:e.attr("data-product-id"),variantId:e.attr("data-variant-id")}),typeof i=="object"&&!i.strict){let s;if(flexbe_cli.theme_id===4?(s=e.closest(".content-zone, .flexbe-card, .flexbe-column, .modal-content"),s.length||(s=e.parents("[data-item-id]").last())):s=e.closest("[data-item-id], .modal-data").eq(0),i={...i},i.count||(i.count=1),t||!i.img){let r=a=>{let l=a.find("[data-img-id]").eq(0),c=l.attr("data-img-id"),u=l.attr("data-img-ext"),p=u?null:l.attr("data-img-name");return c?{id:c,ext:u,name:p}:null};i.img=r(s)||r(s.closest(".flexbe-row"))}if(t||!i.title){var o;let r=s.find(".name, .title, .item-title, .text_title, .element-text--title, .text-style-h1, .text-style-h2, .text-style-h3, .text-style-h4, .text-style-title, .text-style-subtitle").not(".text-rotator").eq(0);r.length||(r=s.find('[class*="font-family-"]').eq(0)),i.title=((o=r[0])==null?void 0:o.innerText.trim())||""}if(t||!i.price&&i.price!==0){let r=a=>{let l=a.clone();flexbe_cli.is_admin&&l.find('[class*="editor-"]').remove(),l.find(".text-rotator").remove(),l.find(".component-image").remove(),l.find("del, s, strike").remove();let c=String(l[0]&&l[0].innerText||"").replace(/\n/g,"<br>").replace(/\.$/,"").replace(/\u00a0/g," "),u=c.match(/(?:\d?\D{0,2} ?)?[1-9](?:[ ,.]?\d{0,3}){2}(?:[,.]\d{1,2})?(?: ?\D)?/g)||[];return c=u.find(p=>p.includes(flexbe_cli.vars.site.currencyData.symbol))||u[0]||"",c=(c.match(/([\d\s]+[ ,.]\d+|[\d\s]+)/g)||[])[0],c?(c=M.parseMoney(c),c):null};i.price=r(e.closest(".element-item").find(".price, .item-price, .main-price, .element-text--price").eq(0))||r(e)||r(s.find(".price, .item-price, .main-price, .element-text--price").eq(0))||r(s)}}if(!i.id)if(i.productId){let s=flexbe_cli.ecommerce.productsStore.getProduct(i.productId);if(s){let a=s.currentVariant(i.variantId||"default").getCartData("image");i.id=`product_${i.productId}:${i.variantId||"default"}`,a.img=Wt(a.img[0]),i={...i,...a}}else i={}}else{let s=flexbe_cli.p_id,r=e.parents("[data-id], [data-item-id], [data-multivar]").toArray().map(l=>{let c=l.getAttribute("data-id")||l.getAttribute("data-item-id")||"",u=l.getAttribute("data-multivar")||"";return c+u}).join(":"),a=flexbe_cli.helpers.hashCode(i.title+i.price);i.id=`${s}_${r||0}:${a}`}return{type:i.productId?"product":"custom",...i}}var yi=n=>typeof n=="string"?new Date(n.slice(0,19).replace("T"," ")):n,ke=({dateFrom:n,dateTo:t,timezone:e=(i=>(i=flexbe)==null||(i=i.vars)==null||(i=i.project)==null?void 0:i.timezone)()})=>{let i=bi({date:new Date,timezone:e,format:"milliseconds"}),o=new Date(yi(n)).getTime(),s=new Date(yi(t)).getTime();return!(n&&o>i||t&&s<i)};function Xn(n){return n.type==="custom"||n.quantity===1/0||n.quantity===-1}function xi(n){return Xn(n)?1/0:n.quantity}var I=[],yt=class extends E{constructor(){super(),this.initList()}dispatch(t,...e){let i=this[t];if(typeof i!="function")throw new Error(`Cart dispatch: action '${t}' doesnt exist`);let o=i.apply(this,e);return this.trigger("dispatch",{name:t,args:e,result:o}),o}initList(){let t=[];if(flexbe_cli.is_admin){let e=flexbe_cli.vars.page.language==="ru",i=flexbe_cli.vars.site.currencyData.code==="RUB";t=[{id:"default1",count:1,protect:!0,img:{unq_id:"default1",id:1000000945,ext:"jpg"},vendorCode:e?"\u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1234":"SKU: 1234",title:e?"\u041F\u0440\u0438\u043C\u0435\u0440 \u0442\u043E\u0432\u0430\u0440\u0430":"Example Item",price:i?750:10},{id:"default2",count:2,protect:!0,vendorCode:e?"\u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1234":"SKU: 1234",img:{unq_id:"default2",id:1000000948,ext:"jpg"},title:e?"\u0414\u0440\u0443\u0433\u043E\u0439 \u0442\u043E\u0432\u0430\u0440":"Another Item",price:i?2550:25}]}else try{t=JSON.parse(localStorage.getItem("f_cart"))||[],t=t.filter(e=>e&&+e.count)}catch(e){console.error(e)}this.dispatch("updateList",t)}getList(){return I}getItem(t){return I.find(e=>e.id===t)}getCount(){return I.reduce((t,e)=>t+e.count,0)}getTotal(){return I.reduce((t,e)=>(e.count&&e.price&&(t+=parseInt(String(e.count),10)*parseFloat(String(e.price))),t),0)}updateList(t){if(!Array.isArray(t))return null;if(t=t.map(e=>{var i;let o=this.getItem(e.id);if(typeof e.img=="string"){let r=jt(e.img);e.img=r&&{id:r.id,ext:r.ext}}else(i=e.img)!=null&&i.img_id&&(e.img={id:e.img.img_id,ext:e.img.img_ext,unq_id:String(e.img.unq_id||e.img.id)});if(e.img=e.img||null,e.type=e.type||"custom",e.price=e.price==null?null:parseFloat(e.price),o&&e.orderPrice==null){var s;e.orderPrice=(s=o.orderPrice)!=null?s:o.price}else e.orderPrice==null&&(e.orderPrice=e.price);return e.quantity=xi(e),e.count=Math.round(+e.count)||0,e}),flexbe_cli.run.is_preview)try{localStorage.setItem("f_cart",JSON.stringify(t))}catch{}return I=t,I}purchase(){flexbe_cli.stat.ecommerce.purchase(I),this.resetList()}resetList(){let t=[...I].filter(e=>e.protect);this.updateList(t)}addItem(t){if(!t.id)throw new Error("Cart add item: product ID is not defined");let e=[...I],i={...t,count:parseFloat(t.count)||1},o=this.getItem(i.id);if(o){let s=e.indexOf(o);i.count+=o.count,e.splice(s,1,i)}else e.push(i);return this.updateList(e),flexbe_cli.stat.ecommerce.add(i),e}removeItem(t){let e=this.getItem(t),i=[...I];return!e||e.protect?I:(i.splice(i.indexOf(e),1),flexbe_cli.stat.ecommerce.remove(e),this.updateList(i))}updateCount({id:t,count:e}){let i=this.getItem(t);if(!i)return null;let o=+i.count||0;e==="+"?i.count+=1:e==="-"&&i.count>0?i.count-=1:i.count=e===""?1:e,Number.isNaN(+i.count)&&(i.count=o),this.updateList(I);let s=i.count-o;return s>0?flexbe_cli.stat.ecommerce.add({...i,count:s}):s<0&&flexbe_cli.stat.ecommerce.remove({...i,count:-s}),i}normalizeListItems(t=I,e={price:!0,count:!1,unavailable:!1,banPriceless:!1}){let i=t.map(o=>{let s={...o};return e.price&&(s.orderPrice=o.price),e.count&&!B.settings.allowPreorder&&(s.count=Math.min(o.count,o.quantity)),s});return e.unavailable&&(i=i.filter(o=>!o.hidden&&o.count)),e.banPriceless&&(i=i.filter(o=>!o.price===null)),this.updateList(i),i}};var Ie=[{id:25280736,unq_id:"25280736",ext:"png",animated:!1,average:"#EEEEEE",border:"#EEEEEE",preview:"UklGRjQAAABXRUJQVlA4ICgAAADQAgCdASoeABYAPyWKvFeuKSWjqAgBwCSJaQAAPaOgAP7t6e+boAAA",proportion:71,transparent:0,original_resolution:1,width:700,height:500}],wt=class extends E{constructor(t,e){super(),this.variant=void 0,this.parent=void 0,this.variant=t,this.parent=e}get id(){return this.variant.id}get article(){var t;return(t=this.variant.vendor_code)!=null?t:""}get name(){var t;return((t=this.variant.name)!=null?t:[]).join(" - ")}get images(){var t;return(t=this.variant.images)!=null?t:[]}get oldPrice(){var t;return(t=this.variant.price_old)!=null?t:!1}get hasOldPrice(){return!!(this.parent.isOldPrice&&this.oldPrice)}get visible(){var t;return(t=this.variant.visible)!=null?t:!1}get optionValues(){return this.variant.option_values}get optionsInfo(){return this.variant.optionsInfo}get quantity(){var t;return(t=this.variant.quantity)!=null?t:0}get price(){var t;return(t=this.variant.price)!=null?t:null}get defaultImageId(){var t;return(t=this.variant.default_image_id)!=null?t:0}isDefault(){return!!(this.variant.is_default&&this.variant.visible)}getPrice(t){return typeof t=="string"?flexbe_cli.vars.site.currencyFormat.str.replace(":value",t).replace(":symbol",flexbe_cli.vars.site.currencyData.symbol):t==null?!flexbe_cli.ecommerce.settings.noPriceLabel&&flexbe_cli.is_admin?flexbe_cli.vars.site.language==="ru"?"\u0446\u0435\u043D\u0430 \u0441\u043A\u0440\u044B\u0442\u0430":"price hidden":flexbe_cli.ecommerce.settings.noPriceLabel:flexbe_cli.locale.formatMoney(t,{freeLabel:flexbe_cli.ecommerce.settings.zeroPrice})}getImages(t){if(this.parent.displayImage==="variant"&&this.parent.options.length){let e=this.variant.images;return e.length?e:Ie}if(this.parent.displayImage==="product"||!this.parent.options.length){let e=this.parent.images;return t==="image"&&e.length>1?[e.find(i=>i.unq_id===this.defaultImageId)||e[0]]:e.length?e:Ie}return Ie}getCartData(t){return{price:this.variant.price,title:this.parent.title,productId:this.parent.id,variantId:this.variant.id,vendorCode:this.variant.vendor_code,quantity:this.variant.quantity,img:this.getImages(t),optionsInfo:this.variant.optionsInfo,count:1,strict:1}}availableInfo(){let{inStockStatus:t,outOfStockStatus:e}=flexbe_cli.ecommerce.settings,i=this.quantity!==0;if(flexbe_cli.is_admin&&(t=t==="none"?"in_stock":t,e=e==="none"?"out_of_stock":e),this.parent.allVariantsDisabled)return{text:"Not available",class:"not-available"};if(this.quantity==="dummy")return{text:flexbe_cli.vars.site.language==="ru"?"\u041D\u0430\u043B\u0438\u0447\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430":"Availability",class:"in-stock in_stock"};if(i&&t!=="none")return{text:this.quantity===-1||t==="in_stock"?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):flexbe_cli.locale.tr("cart::quantity_status::items_in_stock",{count:this.quantity}),class:"in-stock in_stock"};if(!i){if(e==="in_stock"&&t!=="none")return{text:flexbe_cli.locale.tr("cart::quantity_status::in_stock"),class:"in-stock in_stock"};if(e==="out_of_stock")return{text:flexbe_cli.locale.tr("cart::quantity_status::out_of_stock"),class:"not-available"};if(e==="preorder")return{text:flexbe_cli.locale.tr("cart::quantity_status::preorder"),class:"preorder"}}return{text:null,class:"hide"}}allowOrder(){let{allowPreorder:t,allowPriceless:e}=flexbe_cli.ecommerce.settings,i=flexbe_cli.locale.tr("ecommerce::option::disabled");return!this.quantity&&!t?{allow:!1,reason:flexbe_cli.locale.tr("ecommerce::option::locked")}:this.parent.allVariantsDisabled?{allow:!1,reason:i}:this.price==null&&!e?{allow:!1,reason:i}:{allow:!0}}};var Ai=(n,t)=>{if(!n.visible)return{exceptionClass:"disabled",tipText:t.needTipsOptions?flexbe_cli.locale.tr("ecommerce::option::disabled"):""};if(!n.quantity){let e=flexbe_cli.ecommerce.settings.outOfStockStatus,i=t.needAvailableOptions?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):"",o=flexbe_cli.ecommerce.settings.allowPreorder,s=o?"":"locked",r=t.needTipsOptions?flexbe_cli.locale.tr("ecommerce::option::locked"):"";return o&&t.needTipsOptions&&(r=e==="in_stock"?i:flexbe_cli.locale.tr("cart::quantity_status::preorder")),o&&e==="none"&&(r=""),{exceptionClass:s,tipText:r}}return t.inStock!=="none"?t.inStock==="items_in_stock"&&n.quantity!==-1?{exceptionClass:"",tipText:t.needAvailableOptions&&t.needTipsOptions?flexbe_cli.locale.tr("cart::quantity_status::items_in_stock",{count:n.quantity}):""}:{exceptionClass:"",tipText:t.needAvailableOptions&&t.needTipsOptions?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):""}:{exceptionClass:"",tipText:""}},Qn=(n,t)=>{let e=!1;return n.length!==t.length?!1:(e=n.every(i=>t.some(o=>i.option_id===o.option_id&&i.value_id===o.value_id)),e)},Zn=({product:n,currentOptions:t,optionsStyle:e})=>{var i,o;let s=(i=e.show_available)!=null?i:!0,r=(o=e.show_in_stock_statuses)!=null?o:!0,a=flexbe_cli.ecommerce.settings.inStockStatus,l=[];return t.length===1?l=n.variants.reduce((c,u)=>[...c,{optionId:`${u.option_values[0].option_id}_${u.option_values[0].value_id}`,...Ai(u,{needTipsOptions:s,needAvailableOptions:r,inStock:a})}],[]):n.variants.forEach(c=>{for(let u=0;u<t.length;u++){let p=t.filter((m,d)=>u!==d),f=c.option_values.filter((m,d)=>u!==d);JSON.stringify(p)===JSON.stringify(f)&&l.push({optionId:`${c.option_values[u].option_id}_${c.option_values[u].value_id}`,...Ai(c,{needTipsOptions:s,needAvailableOptions:r,inStock:a})})}}),l},Jn=n=>n.find(t=>t.isDefault())||n.find(t=>t.visible)||n[0],ct=class extends E{constructor(t){super(),this.product=void 0,this.variantItems=void 0,this.activeVariant=void 0,this.activeOptions=void 0,this.oldPayload=void 0,this.hasOptionsElement=void 0,this.product=t,this.variantItems=t.variants.map(e=>new wt(e,this)),this.init()}get id(){return this.product.id}get settings(){var t;return(t=this.product.settings)!=null?t:{}}get link(){if(this.settings.use_custom_uri){var t;return(t=this.settings.uri)!=null?t:""}return""}get variants(){return this.variantItems}get title(){var t;return(t=this.product.name)!=null?t:""}get description(){var t;return(t=this.product.description)!=null?t:""}get options(){var t;return(t=this.product.options)!=null?t:[]}get hasVariants(){return this.variants.length>1}get allVariantsDisabled(){return!this.variants.filter(t=>t.visible).length}get displayImage(){var t;return(t=this.product.displayImage)!=null?t:"product"}get images(){var t;return(t=this.product.images)!=null?t:[]}get isOldPrice(){var t;return(t=this.product.usePriceOld)!=null?t:!1}get hasOptions(){return!!this.product.options.length}get visible(){return!!this.product.visible}init(){let t=Jn(this.variantItems),e=t.optionValues;this.setOption(e),this.setVariant(t)}getAction(t){return this.hasVariants&&!t&&!this.hasOptionsElement?"modal":"cart"}getVariant(t){var e;return(e=this.variantItems.filter(i=>String(i.id)===String(t))[0])!=null?e:this.variantItems[0]}currentVariant(t){return t==="default"?this.activeVariant:this.getVariant(t)}currentOptions(t){return t&&t!=="default"?this.getVariant(t).optionValues:this.activeOptions}selectOption(t){let[e,i]=t.split("_"),o=this.currentOptions().map(r=>String(r.option_id)===String(e)?{option_id:+e,value_id:+i}:r),s=this.variantItems.find(r=>Qn(r.optionValues,o));this.setOption(o),this.setVariant(s),t!==this.oldPayload&&(flexbe_cli.events.trigger(`update_${this.product.id}`,this),this.oldPayload=t)}setOption(t){this.activeOptions=t}setVariant(t){this.activeVariant=t}setOptionElement(){this.hasOptionsElement||(this.hasOptionsElement=!0,flexbe_cli.events.trigger(`update_${this.product.id}`,this))}combinationOptionsList(t){return Zn({product:this.product,currentOptions:this.activeOptions,optionsStyle:t})}};var xt=class extends E{constructor(){super(),this.products=void 0,this.products=new Map,this.init()}init(){let t=document.getElementById("flexbe-products-store");if(t){try{let e=JSON.parse(t.textContent.replaceAll("&quot;",'"').replaceAll("&#039;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"));this.addToStore(e)}catch{}t.parentNode.removeChild(t)}}addToStore(t){t.forEach(e=>{(e.visible||flexbe_cli.is_admin)&&this.products.set(String(e.id),new ct(e))})}getProducts(t){return t.map(e=>this.products.get(String(e))).filter(Boolean)}getProduct(t){return this.products.get(String(t))}getDummyProduct(){let t=flexbe_cli.vars.site.language==="ru";return new ct({id:0,name:t?"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430":"Product name",description:t?"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430 \u0434\u043E\u043B\u0436\u043D\u043E \u043E\u0442\u0440\u0430\u0436\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0438 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B, \u0432\u0430\u0436\u043D\u044B\u0435 \u043F\u0440\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0435.":"The product description should convey the key features and qualities that help customers make a purchasing decision.",images:t?[{id:39821031,ext:"jpg",animated:!1,average:"#EEEEEE",border:"#EEEEEE",height:2480,preview:"UklGRkYAAABXRUJQVlA4IDoAAAAQBACdASoeACMAPxV8r1GxKKQitVv4AiAiiWkAAHdYxpA7nUpHNdVoAAD+7mmMq9LCAW+j7lgJyYAA",proportion:114.81,transparent:0,width:2160}]:[{animated:!1,average:"#EEEEEE",border:"#EEEEEE",ext:"jpg",height:1080,id:39909534,preview:"UklGRkwAAABXRUJQVlA4IEAAAADwAwCdASoeAB4APyVyyWSuJKkpFAHAJIlpAAA9ZIprB9gU3U+hJ/oAAP7tQ+5GIEcJuzeAREpLgMJmahfgAAAA",proportion:100,transparent:0,width:1080}],variants:[{id:6468,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 1"]:["Variant 1"],option_values:[{option_id:893,value_id:2338}],vendor_code:t?"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:1},{id:6480,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 2"]:["Variant 2"],option_values:[{option_id:893,value_id:2339}],vendor_code:t?"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:0},{id:6481,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 3"]:["Variant 3"],option_values:[{option_id:893,value_id:2340}],vendor_code:t?"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:0}],options:[{id:893,name:t?"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u043F\u0446\u0438\u0438":"Option name",sort_index:0,values:[{id:2338,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 1":"Variant 1",data:{color:"#ffffff",contrast:"dark",contrastFixed:"dark"}},{id:2339,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 2":"Variant 2",data:{color:"#000000",contrast:"light",contrastFixed:"light"}},{id:2340,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 3":"Variant 3",data:{color:"#7666F6",contrast:"dark",contrastFixed:"dark"}}],data:{type:"color",widget_type:"radio"}}],visible:!0,usePriceOld:!0,displayImage:"product",available:!0})}async loadProducts({showType:t,productIds:e,categoryIds:i,limit:o,onlyVisible:s,hideOutOfStock:r}){let a={project_id:flexbe_cli.vars.site.id,productIds:t==="select_products"?e:void 0,categoryIds:t==="select_category"?i:void 0,showType:t,limit:o,onlyVisible:s??!0,hideOutOfStock:r??flexbe_cli.vars.site.ecommerce.hideOutOfStock},{products:l,categories:c}=await new Promise((u,p)=>{let f=d=>{u(d)},m=d=>{p(d)};return $.ajax({url:"/api/ecommerce/data/",type:"GET",dataType:"json",data:a}).done(f).fail(m)});return this.addToStore(l),{categories:c,products:l}}};var At=class extends E{get hasPromotionChanges(){var t,e;return!!((t=this.promotionsChanges)!=null&&t.discount)||!!((e=this.promotionsChanges)!=null&&e.promocode)}get groupId(){return typeof flexbe_cli=="object"?flexbe_cli.group_id:null}get timezone(){return typeof flexbe_cli=="object"?flexbe_cli.vars.site.timezone:null}constructor(t){super(),this.options=void 0,this.discounts=void 0,this.promocode=void 0,this.activeDiscount=void 0,this.nearestDiscount=void 0,this.appliedPromocode=void 0,this.promotionsChanges=void 0,this.getTotal=void 0,this.getTotalIncludingPromotions=void 0,this.options=t,this.appliedPromocode=null,this.activeDiscount=null,this.nearestDiscount=null,this.promotionsChanges={},this.getTotal=()=>(t.getTotal==null?void 0:t.getTotal())||0,this.getTotalIncludingPromotions=()=>{var e,i;let o=this.getTotal(),s=((e=this.activeDiscount)==null?void 0:e.discountValue)||0,r=((i=this.appliedPromocode)==null?void 0:i.discountValue)||0;return o-s-r},flexbe_cli.is_admin||this.init(t)}init(t){var e;this.updateDiscountList((e=flexbe_cli.vars.site.discounts)!=null?e:[],{updateChanges:!1}),t.needUpdateWithLS&&this.updateFromLocalStorage(),this.updateActiveDiscount(!1),this.updateNearestDiscount(),this.bindEvents()}async dispatch(t,...e){let i=this[t];if(typeof i!="function")throw new Error(`Promotion dispatch: action '${t}' doesnt exist`);let o=await i.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:o})}bindEvents(){this.on("dispatch.promotion-store",({name:t})=>{["applyPromocode","removePromocode"].includes(t)&&(this.updateActiveDiscount(),this.updateNearestDiscount())})}updateActiveDiscount(t=!1){var e;if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount){this.activeDiscount=null;return}let i=this.discounts.filter(l=>l.isAvailableByTime),o=this.getTotal(),s=i.filter(l=>o>=l.active_from&&o-l.discountValue>=0).sort((l,c)=>c.discountValue-l.discountValue)[0]||null,r=this.activeDiscount,a=s?this.getDiscountData(s.id):null;t&&s?.discountValue!==((e=this.activeDiscount)==null?void 0:e.discountValue)&&(this.promotionsChanges.discount={oldData:r,newData:a}),this.activeDiscount=a}updateNearestDiscount(){var t;let e=this.getTotal(),i=this.getTotalIncludingPromotions();if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount||i<=0){this.nearestDiscount=null;return}let o=this.discounts.filter(r=>r.isAvailableByTime),s=(t=o.filter(r=>r.active_from>e).filter(r=>{if(this.activeDiscount){if(r.discount_type==="percent"){let a=r.active_from*r.discount_amount;return this.activeDiscount.discount_type==="percent"?a>r.active_from*this.activeDiscount.discount_amount:a>this.activeDiscount.discount_amount}return+r.discount_amount>this.activeDiscount.discountValue}return!0}).sort((r,a)=>r.discountValue-a.discountValue).sort((r,a)=>r.active_from-a.active_from)[0])==null?void 0:t.active_from;if(s){let r=o.filter(a=>a.active_from===s).filter(a=>{var l;return!this.activeDiscount||a.discountValue>((l=this.activeDiscount)==null?void 0:l.discountValue)}).sort((a,l)=>l.discountValue-a.discountValue)[0]||{};this.nearestDiscount=r?this.getDiscountData(r.id):null}else this.nearestDiscount=null}updateAppliedPromocode(){var t;if(!this.appliedPromocode)return;let e=((t=this.promotionsChanges)==null||(t=t.promocode)==null?void 0:t.oldData)||this.appliedPromocode,i=this.getPromocodeData();if(e&&i){if(e.discountValue!==i?.discountValue||e.delivery_free!==i?.delivery_free){var o;this.promotionsChanges.promocode={oldData:((o=this.promotionsChanges)==null||(o=o.promocode)==null?void 0:o.oldData)||this.appliedPromocode,newData:i,code:this.appliedPromocode.code}}else this.acceptPromotionChanges({promocode:!0});this.appliedPromocode=this.promocode}}async applyPromocode(t){let e=this.getTotal(),i;try{i=await this.loadDataPromocode(t)}catch{let s=Error();throw s.name="default_error",s}if(this.updatePromocode(i,{updatePromotions:!1}),e&&this.promocode.active_from&&this.promocode.active_from>e){let o=new Error(this.promocode.active_from.toString());throw o.name="total_error",o}if(!this.promocode.isAvailableByTime){let o=new Error;throw o.name="timeout_error",o}if(this.appliedPromocode=i,this.options.needUpdateWithLS)try{localStorage.setItem("f_applied_promocode",JSON.stringify({code:t,id:this.promocode.id}))}catch{}}removePromocode(){this.appliedPromocode=null,this.acceptPromotionChanges({promocode:!0});try{localStorage.removeItem("f_applied_promocode")}catch{}}acceptPromotionChanges({promocode:t,discount:e}={}){t||e?(t&&delete this.promotionsChanges.promocode,e&&delete this.promotionsChanges.discount):this.promotionsChanges={}}async updateFromLocalStorage(){let t=JSON.parse(localStorage.getItem("f_applied_promocode"));if(t&&t.id&&t.code){var e;let i;try{i=await this.loadDataPromocode(t.code)}catch{this.removePromocode();return}if(this.updatePromocode(i,{updatePromotions:!1}),!((e=this.promocode)!=null&&e.isActive)){this.removePromocode();return}this.appliedPromocode=this.promocode}}getDiscountData(t){return this.discounts.find(e=>e.id===t)}getPromocodeData(){return this.promocode}async loadPromotionList(t){return new Promise((e,i)=>{let o=r=>{e(r)},s=r=>{i(r)};return $.ajax({url:"/api/promotions/get_list/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars.site.id,promotionType:t}}).done(o).fail(s)})}async loadDataPromocode(t){return new Promise((e,i)=>{let o=r=>{e(r)},s=r=>{i(r)};return $.ajax({url:"/api/promotions/get_promocode/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars.site.id,promoCode:t}}).done(o).fail(s)})}updatePromocode(t,{updatePromotions:e=!0}={}){typeof t=="object"&&Object.defineProperties(t,{isAvailableByTime:{get:()=>{let{date_from:i,date_to:o}=t;return ke({dateFrom:i,dateTo:o,timezone:this.timezone})}},discountValue:{get:()=>{let i=this.getTotal();return t&&t.discount_type==="percent"?Math.round(i*t.discount_amount)/100:+t.discount_amount}},isAvailable:{get:()=>!!this.promocode&&t.isAvailableByTime},isActive:{get:()=>{if(!t.isAvailable)return!1;let i=this.getTotal();return t?.active_from<=i}},hasFreeDelivery:{get:()=>t?.delivery_free||t?.discount_type==="delivery"}}),this.promocode=t,e&&this.updateAppliedPromocode()}updateDiscountList(t,{updateChanges:e=!0,updatePromotions:i=!0}={}){t.forEach(o=>{Object.defineProperties(o,{isAvailableByTime:{get:()=>{let{date_from:s,date_to:r}=o;return ke({dateFrom:s,dateTo:r,timezone:this.timezone})}},discountValue:{get:()=>{let s=this.getTotal();return o&&o.discount_type==="percent"?Math.round(s*o.discount_amount)/100:+o.discount_amount}}})}),this.discounts=t,i&&(this.updateActiveDiscount(e),this.updateNearestDiscount())}async loadDiscountList({updateChanges:t=!0,updatePromotions:e=!0}={}){let i;try{i=await this.loadPromotionList("discount")}catch{this.discounts=[];return}this.updateDiscountList(i,{updateChanges:t,updatePromotions:e})}};var $i="f_last_shipping_type",$t=class extends E{get methods(){return Object.values(this.lists).flat()}get enabled(){return this.methods.length>0}constructor(){super(),this.activeType=void 0,this.activeAddress={country:"",addressLine1:"",addressLine2:"",city:"",region:"",zipCode:""},this.lists={delivery:[],pickup:[]},this.activeMethod=void 0,this.ecommerceSetting=void 0,this.lists={delivery:(flexbe_cli.vars.site.delivery||[]).filter(t=>t.enabled),pickup:(flexbe_cli.vars.site.pickups||[]).filter(t=>t.enabled)},this.ecommerceSetting=B.settings,this.dispatch("selectType",localStorage.getItem($i)||"delivery")}dispatch(t,...e){let i=this[t];if(typeof i!="function")throw new Error(`Shipping dispatch: action '${t}' doesnt exist`);let o=i.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:o})}getList(t=this.activeType){return this.lists[t]||[]}getActive(){let t=this.activeMethod;if(!t)return null;let e=this.getShippingType(t),i={id:t.id,type:this.getShippingType(t),title:t.title,desc:t.desc,price:this.getPrice(t.id),fieldIds:t.fields.map(o=>o.id),address:null};return e==="pickup"?i.address=t.address:t.deliveryAddressEnabled&&(i.address=this.activeAddress),i}getMethod(t){return this.methods.find(e=>e.id.toString()===t)}getShippingType(t){if(!t)return null;let e=typeof t=="string"?t:t.id;for(let[i,o]of Object.entries(this.lists))if(o.some(s=>s.id.toString()===e.toString()))return i;return null}setAddress(t){this.activeAddress={...this.activeAddress,...t}}syncFromLS(){let t=`f_last_${this.activeType}`,e=localStorage.getItem(t);this.getMethod(e)||localStorage.removeItem(t),this.dispatch("selectMethod",e)}selectType(t){var e;t=(e=this.lists[t])!=null&&e.length?t:Object.keys(this.lists).find(i=>this.lists[i].length),t&&(this.activeType=t,localStorage.setItem($i,this.activeType),this.syncFromLS())}selectMethod(t){if(this.activeMethod=this.getMethod(t)||this.getList()[0],this.activeMethod){let e=this.getShippingType(this.activeMethod);localStorage.setItem(`f_last_${e}`,this.activeMethod.id),this.activeType!==e&&this.dispatch("selectType",e)}return this.activeMethod}getPrice(t){let{appliedPromocode:e}=B.promotionStore||{},i=t?this.getMethod(t):this.activeMethod,o=+this.ecommerceSetting.minTotalOrder,s=0,r="\u23E4",a=0,l="",c=0,u="",p=0,f="",m=0,d="",h=!1,g;if(i){let _=B.cartStore.getTotal(),y=e?.hasFreeShipping&&e?.isActive;i.prices.filter(v=>v.from!=="").forEach((v,j)=>{i.useMinTotal&&!j&&+v.from&&(s=+v.price,+v.from>o&&(p=+v.from)),(_>=+v.from||!j)&&(s=+v.price),y&&(s=0)});let A=i.prices.find(v=>v.price===0);h=!!i.useNotFixTotal,g=h&&(!A||A.from===""),A&&(a=+A.from||0,c=Math.max(0,a-_),l=M.formatMoney(a),u=M.formatMoney(c)),p&&(m=Math.max(0,p-_),f=M.formatMoney(p),d=M.formatMoney(m))}return(!h||a&&c<=0)&&(h=!1,r=M.formatMoney(s,{freeLabel:!0})),{current:s,currentFormatted:r,freeFrom:a,freeFromFormatted:l,untilFree:c,untilFreeFormatted:u,minTotal:p,minTotalFormatted:f,untilMinTotal:m,untilMinTotalFormatted:d,notFixedPrice:h,notHasFree:g}}};var Ce=class{constructor(){this.cartStore=null,this.shippingStore=null,this.promotionStore=null,this.productsStore=null,this.getProductInfo=wi}get settings(){return flexbe_cli.vars.site.ecommerce}init({enableDelivery:t=!1,enablePromotions:e=!1,enableProducts:i=!1}){this.cartStore=new yt,e&&(this.promotionStore=new At({getTotal:this.cartStore.getTotal,needUpdateWithLS:!flexbe_cli.is_admin})),t&&(this.shippingStore=new $t),i&&(this.productsStore=new xt)}},B=new Ce;var Et=class{static create(){return new this}constructor(){this.Interactivity=void 0,this.animationsData=[],this.interactionInstances=[],this.responsiveMode=flexbe_cli.resize.responsiveMode,this.observableLoopSliderElements=[],this.observableTabs=[],this.slidersEventsMap=new Map,this.init()}async init(){this.findAnimations(),this.animationsData.length&&await this.createAnimations(),this.bindEvents()}bindEvents(){window.addEventListener("resized",()=>{let t=flexbe_cli.resize.responsiveMode;t!==this.responsiveMode&&(this.responsiveMode=t,this.updateAnimations())}),flexbe_cli.is_admin&&flexbe_cli.events.off("hideShowUI.global-animation-component").on("hideShowUI.global-animation-component",t=>{t==="preview"?(this.findAnimations(),this.createAnimations()):this.destroyAnimations()})}findAnimations(){this.animationsData=[],$("[data-flexbe-animations]").each((t,e)=>{let i=JSON.parse(e.getAttribute("data-flexbe-animations"));i.forEach(o=>{o.element=e}),i&&i.length&&this.animationsData.push(...i),e.animationsOptions=i,e.removeAttribute("data-flexbe-animations")})}async require(){this.Interactivity||(this.Interactivity=(await import("../../js/chunk-MKGVTE5S.mjs")).default)}async createAnimation(t){var e;let i=t==null||(e=t.responsive)==null?void 0:e[this.responsiveMode];if(i)if(i.enabled){var o;let s=(t==null||(o=t.responsive)==null?void 0:o[i.inherit])||i,r=t.element.closest(".swiper-slide"),a=t.element.closest(".wait-animation"),l=t.element.parentNode.closest(".has-animation"),c=t.element.closest(".animation--slide_up"),u=s.interactionType==="scroll"&&s.interactionSettings.fixed;c&&u&&flexbe_cli.transitions.stopTransition(a);let f=await this.Interactivity.create({id:t.id,element:t.element,allowNativePositionFixed:!r&&!l,normalizeIntersectionState:(m,d)=>{if(d.interactionType==="screen"){let _=d.interactionSettings.triggerElements[0],y=_.closest(".swiper-slide"),A=_.closest(".tab-content");if(y||A){let v=!0;if(A&&(v=v&&A.classList.contains("active")),y){var h,g;let j=y.getAttribute("data-item-id"),D=y.closest(".swiper"),J=(h=D==null||(g=D.swiper)==null?void 0:g.slides)!=null?h:[],w=[y,...J.filter(tt=>tt.getAttribute("data-item-id")===j)];v=v&&w.some(tt=>tt.classList.contains("swiper-slide-visible"))}return v&&m==="in"?"in":"out"}}return m},...s,normalizeOptions:m=>({...m,steps:m.steps.map(d=>{let h={...d};return d.animationParams.skewEnabled||(delete h.animationParams.skewX,delete h.animationParams.skewY),d.animationParams.clipPathEnabled||delete h.animationParams.clipPath,h})})});f.setProgress(0,!1),this.interactionInstances.push(f),this.walkTriggerElements({interaction:f}),$(a).off("flexbe-transition-end").one("flexbe-transition-end",async()=>{f.updateOffsetBound()})}else this.Interactivity.removeAnimationStyles(t.element)}async createAnimations(){flexbe_cli.run.is_preview&&(await this.require(),this.animationsData.forEach(t=>this.createAnimation(t)))}walkTriggerElements({interaction:t}){t.interactionSettings.triggerElements.forEach(e=>{let i=e.closest(".swiper"),o=e.closest(".tab-content");i&&(i.swiper?this.sliderNormalizationsInit({swiper:i.swiper,triggerElement:e,interaction:t}):i.addEventListener("swiper:init",()=>{setTimeout(()=>{this.sliderNormalizationsInit({swiper:i.swiper,triggerElement:e,interaction:t})},50)})),o&&this.tabNormalizationsInit({tabEl:o,interaction:t})})}bindSliderEvents(t,e){this.slidersEventsMap.get(t)||this.slidersEventsMap.set(t,{});let i=this.slidersEventsMap.get(t);Object.entries(e).forEach(([o,s])=>{i[o]||(i[o]=[],t.on(o,r=>{i[o].forEach(l=>l(r))})),i[o].push(s)})}sliderNormalizationsInit({swiper:t,triggerElement:e,interaction:i}){if(!t||!i)return;let o=e.classList.contains("swiper-slide"),s=e.closest(".swiper-slide");if(i.interactionType==="screen"&&s&&(this.bindSliderEvents(t,{slideChange:()=>{requestAnimationFrame(()=>{this.Interactivity.checkIntersection(i)})}}),this.Interactivity.checkIntersection(i)),o&&(i.updateStyles(),this.bindSliderEvents(t,{setTranslate:()=>{requestAnimationFrame(()=>{i.updateStyles()})},update:()=>i.updateStyles()})),t.params.loop){if(this.observableLoopSliderElements.includes(t.el))return;this.observableLoopSliderElements.push(t.el);let r=Array.from(t.slides||[]);r.filter(l=>l.classList.contains("swiper-slide-duplicate")).forEach(l=>{let c=l.getAttribute("data-item-id"),u=r.find(f=>f.getAttribute("data-item-id")===c&&!f.hasAttribute("data-cloned")),p=Array.from(l.querySelectorAll(".has-animation"));u.animationsOptions&&this.createAnimation({...u.animationsOptions[0],element:l}),p.forEach(f=>{var m;let d=f.getAttribute("data-id")||((m=f.closest("[data-id]"))==null?void 0:m.getAttribute("data-id")),h=u.querySelector(`[data-id="${d}"].has-animation, [data-id="${d}"] .has-animation`);h&&h.animationsOptions&&this.createAnimation({...h.animationsOptions[0],element:f})})})}}tabNormalizationsInit({tabEl:t,interaction:e}){this.observableTabs.includes(t)||(this.observableTabs.push(t),t.addEventListener("element-become-visible",()=>this.Interactivity.checkIntersection(e)),t.addEventListener("element-become-hidden",()=>this.Interactivity.checkIntersection(e)))}async updateAnimations(){flexbe_cli.run.is_preview&&(this.destroyAnimations(),await this.createAnimations())}destroyAnimations(){this.interactionInstances.forEach(t=>{var e;return(e=this.Interactivity)==null?void 0:e.remove(t)}),this.interactionInstances=[]}};var to=".autowidth-desktop:not(.autoheight-desktop) > .element-content, .autowidth-mobile:not(.autoheight-mobile) > .element-content",Ei="--elementHeightPx",ut=class n{static create(){return new this}constructor(){flexbe_cli.is_admin&&flexbe_cli.events.off("entity_render:template.autoWidth").on("entity_render:template.autoWidth",e=>{if(!e||!e.id)return;let i=document.querySelector(`[data-id="${e.id}"]`);this.observeInArea(i)});let t=e=>{let i=e._core;if(i&&i.inScreen)this.observeInArea(i.area);else{let o=new AbortController;e.addEventListener("screen",s=>{let r=s.detail||{};r.state&&r.first&&(this.observeInArea(s.target),o.abort())},{signal:o.signal})}};k(()=>document.querySelectorAll(".b_block").forEach(e=>t(e))),k(()=>document.querySelectorAll(".m_modal").forEach(e=>t(e))),k(()=>document.querySelectorAll(".w_widget").forEach(e=>t(e)))}observeInArea(t=document){let e=t?.querySelectorAll(to)||[];Array.from(e).forEach(i=>n.observer.observe(i))}};ut.observer=new ResizeObserver(n=>{n.forEach(({target:t,contentRect:e})=>{let i=t&&t.offsetParent;if(!i)return;let o=getComputedStyle(i),s=`${e.height}px`;o.getPropertyValue(Ei)!==s&&requestAnimationFrame(()=>{i.style.setProperty(Ei,s)})})});var Ii,eo=150,io=2160,no=Math.min(2,window.devicePixelRatio),F=class{static create(){return new this}constructor(){this.imageOptions={lazy:!0,lazy_priority:!1,...flexbe_cli.vars.site.images||{}},this.loadInArea(document,"inline"),this.initLazyLoading(),this.initLazyPriority()}initLazyLoading(){flexbe_cli.is_admin&&flexbe_cli.events.off("entity_render:template.lazyLoading").on("entity_render:template.lazyLoading",e=>{if(!e||!e.id)return;let i=document.querySelector(`[data-id="${e.id}"]`);this.loadInArea(i,"inline"),this.loadInArea(i,"lazy")});let t=e=>{let i=e._core;if(i&&i.inScreen)this.loadInArea(i.area,"lazy");else{let o=new AbortController;e.addEventListener("screen",s=>{let r=s.detail||{};r.state&&r.first&&(this.loadInArea(s.target,"lazy"),o.abort())},{signal:o.signal})}};k(()=>document.querySelectorAll(".b_block").forEach(e=>t(e))),k(()=>document.querySelectorAll(".m_modal").forEach(e=>t(e))),k(()=>document.querySelectorAll(".w_widget").forEach(e=>t(e)))}initLazyPriority(){let t=this.imageOptions.lazy,e=this.imageOptions.lazy_priority;!t||!e||$(window).one("load.lazyPriority",()=>{let i=[".component-bg",'.bg-fill[data-type="image"]',".component-image",".component-icon"].join(",");this.loadInArea(document,"lazy"),Array.from(document.querySelectorAll(i)).forEach(o=>o.dispatchEvent(new CustomEvent("setImage",{detail:{reason:"lazyPriority"}})))})}loadInArea(t=document,e="inline"){if(!t)return;let i=Array.from(t.querySelectorAll(`[data-${e}-src], [data-${e}-bg], [data-${e}-href]`));oo(i)}};Ii=F;F.observer=new ResizeObserver(n=>{n.filter(e=>e.contentRect.width||e.contentRect.height).forEach(e=>{Ci(e.target),Ii.observer.unobserve(e.target)})});function oo(n){n.length&&n.forEach(t=>{if(t.tagName==="LINK"||t.tagName==="SCRIPT"){Ci(t);return}if(t.tagName==="svg"||t.tagName==="use"){var e;t=(e=t.closest("svg"))==null?void 0:e.parentElement}F.observer.observe(t)})}function Ci(n){let t=n.dataset.inlineSrc||n.dataset.lazySrc,e=n.dataset.inlineBg||n.dataset.lazyBg,i=n.dataset.inlineHref||n.dataset.lazyHref,o=t||e||i,s=n.tagName==="svg"?[n]:[...n.children].filter(d=>d.tagName==="svg");if(s.length){let d=s[0].querySelector("use"),h=d&&(d.dataset.inlineHref||d.dataset.lazyHref);return h&&ki(d,h),!0}if(n.tagName==="LINK")return ki(n,o),!0;if(n.tagName==="SCRIPT")return Te(n,o),!0;if(!o)return!0;if(!/%optimalWidth%/gi.test(o))return e?Si(n,o):Te(n,o),F.observer.unobserve(n),!0;let r=n.parentElement,a=r.dataset.imgAttachment==="fixed",l=n.dataset.imgProportion||100,c=a?window.innerWidth:r.offsetWidth,u=a?window.innerHeight:r.offsetHeight;if(!c&&!u)return!1;let p=l/100,f=t?p:u/c,m;return f<=p?m=c:m=u/p,m=Math.max(eo,Math.min(m*no,io)),m=Math.round(m),e?Si(n,o.replace(/%optimalWidth%/gi,`${m}`)):Te(n,o.replace(/%optimalWidth%/gi,`${m}`)),F.observer.unobserve(n),!0}function Si(n,t){let e=n.parentElement.querySelector("img"),i=getComputedStyle(n).getPropertyValue("background-image");n.style.backgroundImage=[`url(${t})`,i].filter(o=>o).join(","),e&&e.setAttribute("src",t),["data-inline-bg","data-lazy-bg"].forEach(o=>n.removeAttribute(o))}function Te(n,t){n.setAttribute("src",t),["data-inline-src","data-lazy-src"].forEach(e=>n.removeAttribute(e))}function ki(n,t){n.setAttribute("href",t),["data-inline-href","data-lazy-href"].forEach(e=>n.removeAttribute(e))}var Ti,Pe={x:0,y:0},Pi=".lightbox-container, .b_block, .m_modal, .w_widget",St="[data-lightbox]",kt=class{static create(){return new this}constructor(){var t;this.loaded=!1,this.opened=!1,this.$lg=void 0,this.bindEvents(),(t=window.history.state)!=null&&t.lg&&this.openGallery(window.history.state.lg)}require(t){if(this.loaded){typeof t=="function"&&t();return}flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.min.css","/_s/lib/jquery/lightGallery/js/lightgallery.min.js"],()=>{this.loaded=!0,typeof t=="function"&&t()})}bindEvents(){$(window).one("load.lightbox",()=>{$(St).length&&this.require()}),$(document).on("click.lightbox",St,t=>{t.preventDefault(),t.stopPropagation()}),$(document).on("pointerdown.lightbox",St,t=>{var e,i;flexbe_cli.run.is_preview&&(t.preventDefault(),t.stopPropagation(),Ti=t.target,Pe={x:(e=t.clientX)!=null?e:t.touches[0].clientX,y:(i=t.clientY)!=null?i:t.touches[0].clientY})}),$(document).on("pointerup.lightbox",St,t=>{var e,i;let o=Ti===t.target,s={x:(e=t.clientX)!=null?e:t.changedTouches[0].clientX,y:(i=t.clientY)!=null?i:t.changedTouches[0].clientY},r=Math.sqrt((Pe.x-s.x)**2+(Pe.y-s.y)**2)<5;if(!o||!r||t.button!==0)return;let a=$(t.currentTarget),l=a.closest(Pi),c=a.attr("data-lightbox"),u=a.closest("[data-loop]").attr("data-loop")==="1",f=l.find(St).filter((d,h)=>{let g=$(h).closest(Pi),_=g.is(l),y=g.closest(".swiper-slide-duplicate").length;return _&&!y}).toArray().map(d=>{let h,g=$(d),_=g.attr("data-lightbox")||g.attr("src")||g.attr("href"),y=g.attr("data-sub-html");return y?h=g.find(y).html():h=g.attr("alt")||g.find("img").attr("alt")||"",u&&g.closest("[data-cloned]").length?null:{src:_,subHtml:h}}).filter(d=>d?.src),m=f.findIndex(d=>d.src===c)||0;this.openGallery({index:m,dynamicEl:f,enableSlide:f.length>1,loop:u})}),$(window).on("popstate.lightbox",()=>{let t=window.history.state||{};t.lg?this.openGallery(t.lg):this.closeGallery()})}openGallery(t={}){if(t.dynamicEl.length===0||this.opened)return;this.opened=!0,this.$lg=$("<div/>");let e=this.$lg,i={index:0,dynamicEl:[],dynamic:!0,subHtmlSelectorRelative:!0,getCaptionFromTitleOrAlt:!0,slideEndAnimation:!1,swipeThreshold:30,counter:!0,closable:!0,download:!1,easing:"ease-out",hideBarsDelay:1e3,zoomIcons:!1,actualSize:!1,enableSlide:!0,loop:!0,...t};i.index<=0&&(i.index=0),e.on("onBeforeOpen.lg",()=>{this.opened=!0,Oi(i)}),e.on("onBeforeSlide.lg",(o,s,r)=>{s!==r&&Oi({...i,index:r})}),e.on("onBeforeClose.lg",()=>{var o;(o=window.history.state)!=null&&o.lg&&(flexbe_cli.lockPopstate=!0,window.history.back(),setTimeout(()=>{flexbe_cli.lockPopstate=!1},20)),this.opened=!1}),this.require(()=>e.lightGallery(i))}closeGallery(){var t;this.opened=!1;let e=(t=this.$lg)==null?void 0:t.data("lightGallery");e&&e.destroy()}};function Oi(n){let t=window.history.state||{};flexbe_cli.lockPopstate=!0,t.lg?window.history.replaceState({lg:n},null,"#image-popup"):window.history.pushState({lg:n},null,"#image-popup"),flexbe_cli.lockPopstate=!1}var Oe=document,It="a[href], [data-action]",Rt="[data-action-target]",zt,Mi,Ct=class n{static create(){return zt||(zt=new n,zt)}constructor(){this.bindEvents()}bindEvents(){let t=e=>!!e.target.closest('[data-prevent-action], [data-flexbe-events="off"]');$(Oe).off("mousedown.component-links-fake",Rt).on("mousedown.component-links-fake",Rt,e=>e.which===2||e.button===1?(e.preventDefault(),!1):!0),$(Oe).off("click.component-links-fake auxclick.component-links-fake").on("click.component-links-fake auxclick.component-links-fake",Rt,e=>{let i=e.originalEvent;return!i||!i.isTrusted||e.target.closest(It)||t(e)?!0:(e.stopPropagation(),e.stopImmediatePropagation(),Se($(e.currentTarget).children(It).get(0),i),!1)}),$(Oe).off("click.component-links auxclick.component-links",It).on("click.component-links auxclick.component-links",It,e=>{let i=e.currentTarget,o=$(i);if(t(e))return!0;if(!flexbe_cli.run.is_preview&&!i.closest(".editor-focus, .b_block--global, .component-menu-dropdown"))return e.preventDefault(),!0;let s=o.closest("[data-action]").data("action")||(i.tagName==="A"?"link":"none");if(this.reachGoals(e),["link","app_link","phone","mail","anchor"].includes(s))return this.actionLink(e);if(s==="file")return this.actionFile();if(s==="button")return this.actionButton(e);if(s==="modalOptions")return this.openProductOptions(e);if(s.startsWith("modal"))return this.actionModal(e);if(s==="cart")return this.actionCart(e);if(s==="quiz")return this.actionQuiz(e);if(s==="close")return this.actionClose(e);if(s==="code")return this.actionCode(e);if(s==="popup")return e.preventDefault(),!1;s==="a11y"&&flexbe_cli.events.trigger("ui_mobilemenu_close"),s==="copy"&&this.actionCopy(e)})}openProductOptions(t){t.preventDefault(),t.stopPropagation();let e=t.currentTarget.dataset.productId;if(!e||!flexbe_cli.run.is_preview)return;let[i]=flexbe_cli.ecommerce.productsStore.getProducts([e]);i&&setTimeout(()=>{flexbe_cli.events.trigger("ui_modal_open",{id:"product-options",data:{product:i},options:{hash:!1,rise:!0}})},100)}actionCode(t){if(!flexbe_cli.run.is_preview)return;let e=t.currentTarget,i=async function(){}.constructor;return new i("event",e.getAttribute("data-code")||"")(t.originalEvent)}actionFile(){return!0}actionLink(t){let e=t.currentTarget,o=e.hasAttribute("href")?e.getAttribute("href"):"",s=t.button===2||t.which===3,r=t.button===1||t.which===2,a=t.metaKey||t.ctrlKey||r||e.getAttribute("target")==="_blank"||!1,l=e.hasAttribute("download"),c=flexbe_cli.is_admin;s||l||a&&!r&&!c||(t.preventDefault(),clearTimeout(Mi),Mi=setTimeout(()=>{flexbe_cli.helpers.gotoLink(o,a)},15))}actionCopy(t){let e=t.currentTarget,i=e.getAttribute("href");i&&(i=new URL(i,location.href).toString());let o=e.getAttribute("data-copy")||i||e.textContent;if(e.closest(".markdown-code-wrapper")){var s;o=(s=e.closest(".markdown-code-wrapper").querySelector("code"))==null?void 0:s.textContent}if(o)try{navigator.clipboard.writeText(o),e.classList.add("copied"),setTimeout(()=>e.classList.remove("copied"),600)}catch(r){console.error("Failed to copy anchor link:",r)}}actionButton(t){t.stopPropagation();let i=$(t.currentTarget).closest(".content-zone, [data-item-id]").first().find(".component-button").not(".form-button").find(It);i[0]&&Se(i[0],t)}actionModal(t){let e=$(t.currentTarget),i=this.getProductInfo(e[0]),o=e.attr("data-modal-id");flexbe_cli.modal.find(o)||(o=flexbe_cli.modal.$list.find(`._anchor[name="${o}"]`).closest(".m_modal").attr("data-id")||o),/^(form|done)$/.test(o)&&!flexbe_cli.modal.find(o)&&(o=`${e.closest("[data-id]").attr("data-id").split("_")[0]}_${o}`),flexbe_cli.events.trigger("ui_mobilemenu_close"),flexbe_cli.events.trigger("ui_modal_open",{id:o,data:{items:i?[i]:[]}})}actionCart(t){let e=$(t.currentTarget),i=e.closest(".m_modal").length,o=e.closest(".disabled").length,s=this.getProductInfo(e[0]),r=!1,a=e.closest(Rt);a.length||(a=e),!(!s||o)&&(r=a.is("button"),r&&(a.append(`
                <svg class="in-cart-icon" viewBox="0 0 18 14" width="18" height="18">
                    <path d="M 2.205 5.77223L 0 7.92347L 6.3 14L 18 2.15124L 15.795 0L 6.3 9.74699L 2.205 5.77223Z"/>
                </svg>
            `),requestAnimationFrame(()=>{a.addClass("animate-add-to-cart")})),setTimeout(()=>{i&&(flexbe_cli.events.trigger("ui_modal_close"),flexbe_cli.ecommerce.cartStore.dispatch("addItem",s)),r&&requestAnimationFrame(()=>{a.removeClass("animate-add-to-cart"),a.find(".in-cart-icon").remove()})},i?450:1600),i||flexbe_cli.ecommerce.cartStore.dispatch("addItem",s))}actionQuiz(t){let e=$(t.currentTarget).closest("[data-id]").attr("data-id");flexbe_cli.events.trigger("quiz_command",{command:"start",id:e})}actionClose(t){t.preventDefault(),flexbe_cli.events.trigger("ui_modal_close")}reachGoals(t){let e=$(t.currentTarget),i=e.attr("data-action"),o=i==="modal"?e.attr("data-modal-id"):e.attr("href"),s=flexbe_cli.stat.getGoal(i,o),r=e.attr("data-goal"),a=e.attr("data-html-goal");flexbe_cli.stat.reachGoals({mainGoal:s,goal:r,htmlGoal:a})}getProductInfo(t){var e;let i=flexbe_cli.ecommerce.getProductInfo(t)||{};return(!((e=i)!=null&&e.title)||i.title==="-"||i.price==null&&!flexbe_cli.ecommerce.settings.allowPriceless)&&(i=null),i}};var qt,Tt=class n{static create(){return qt||(qt=new n,qt)}constructor(){this.bindEvents()}bindEvents(){let t=(e,i)=>{var o;let r=(o=$(e).find(".swiper")[0])==null?void 0:o.swiper;if(r){if(i==="prev")r.slidePrev();else if(i==="next")r.slideNext();else if(i.includes("slide")){let a=+i.match(/\d+$/)[0];r.slideTo(a-1)}}};$("body").on("click",'a[href^="#prev"], a[href^="#next"], a[href^="#slide"]',e=>{let i=String(e.currentTarget.href).match(".*#(.*)")[1],[o,s]=i.split(":"),r;s?r=$(`[data-id="${s}"]`)[0]:r=$(e.currentTarget).parents("[data-id]").toArray().find(l=>l.querySelector(".swiper")),r&&(flexbe_cli.scroll.toElement(r,{complete:()=>{t(r,o)}}),e.preventDefault(),e.stopPropagation())})}};var Li=new Map,dt=new Map,Fi={},Me=n=>{let t=$(n),e=t.find("[data-component]").toArray();return t.each((i,o)=>{$(o).is("[data-component]")&&e.unshift(o)}),e},Di=(n,t)=>{dt.has(n)||dt.set(n,t),n.componentInstance=t},so=n=>{n.componentInstance=null,dt.delete(n)},ro={registerComponent(n){Li.set(n.is,n)},getComponentClass(n){return Li.get(n)},getInstances(n){return Me(n).map(t=>dt.get(t)).filter(Boolean)},getGlobalInstance(n){return Fi[n]},setGlobalInstance(n,t){Fi[n]=t},init(){this.setGlobalInstance("autoWidth",ut.create()),this.setGlobalInstance("lazyLoading",F.create()),this.setGlobalInstance("links",Ct.create()),this.setGlobalInstance("lightbox",kt.create()),this.setGlobalInstance("sliderControl",Tt.create()),this.setGlobalInstance("animation",Et.create()),flexbe_cli.events.off(".core_components").on("hideShowUI.core_components",n=>{Array.from(dt.values()).forEach(t=>t._onHideShowUI(n))}),$(window).off(".core_components").on("resized.core_components",()=>{Array.from(dt.values()).forEach(n=>n._onWindowResize())})},initInArea(n,t){bt(Me(n),10).forEach(st(i=>i.forEach(o=>this.initComponent(o,t))))},destroyInArea(n){bt(Me(n),10).forEach(st(e=>e.forEach(i=>this.destroyComponent(i))))},initComponent(n,t="init",e){if(!(n!=null&&n.isConnected))return null;let i=n.componentInstance;if(i)if(t==="update")i.destroy();else return Di(n,i),i;e=e||flexbe_cli.entity.closestEntity(n);let o=String(n.getAttribute("data-component")).trim(),s=this.getComponentClass(o);return s?(typeof s=="function"&&(i=new s({component:n,core:e||flexbe_cli.entity.closestEntity(n),reason:t}),i._onInit(),Di(n,i)),i):null},destroyComponent(n){let t=n.componentInstance;t&&t.destroy(),so(n)}},Le=ro;flexbe_cli.helpers=Ue;flexbe_cli.run=K;flexbe_cli.utm=it;flexbe_cli.stat=ce;flexbe_cli.events=b;flexbe_cli.locale=M;flexbe_cli.adaptive=ue;flexbe_cli.scroll=z;flexbe_cli.resize=P;flexbe_cli.tip=ti;flexbe_cli.transitions=Ft;flexbe_cli.require=R;flexbe_cli.fixed=me;flexbe_cli.entity=ot;flexbe_cli.block=Ee;flexbe_cli.modal=L;flexbe_cli.ecommerce=B;flexbe_cli.components=Le;ie(()=>{K.init(),z.init(),P.init(),ue.init()},()=>{Le.init(),k(()=>ce.init()),k(()=>B.init({enableDelivery:!0,enablePromotions:!0,enableProducts:!0})),k(()=>{ot.init(),Ee.init(),L.init()}),k(()=>ii.init()),k(()=>me.init(),200)});
